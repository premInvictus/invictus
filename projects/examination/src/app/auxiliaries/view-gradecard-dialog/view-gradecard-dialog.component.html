<!-- pattern="[0-9]{1}|[0-9]{2}|[0-9]{3}|[A-C]{1}" -->
<div class="row">
    <div class="col-12 ">
        <button class="top-close-btn" mat-button (click)="closeDialog()">Close <i
                class="fas fa-times font-size-16 margin-left-15"></i></button>
    </div>
</div>
<table id="gradecard" cellpadding="0" cellspacing="0" width="100%">
    <tr>
        <td>
            <div class="row" *ngIf="schoolDetails">
                <div class="col-12">
                    <div class="row">
                        <div class="col-12">
                            <div class="header" [innerHTML]="header" style="height: 80px; display:contents;"></div>
                        </div>
                    </div>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-12 text-center" *ngIf="studentDetails">
                    <span class="font-size-20 font-bold">Academic Session : {{currentSession.ses_name}}</span><br>
                    <span class="font-size-20 font-bold">Report Card for Class {{studentDetails.class_name}}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-3" *ngIf="studentDetails">
                    <table>
                        <tr>
                            <td><span>Roll no.</span></td>
                            <td><span>:</span></td>
                            <td>{{studentDetails.r_rollno}}</td>
                        </tr>
                        <!-- <tr>
                            <td><span>Admission No.</span></td>
                            <td><span>:</span></td>
                            <td>{{studentDetails.em_admission_no}}</td>
                        </tr> -->

                        <tr>
                            <td><span>Student's Name</span></td>
                            <td><span>:</span></td>
                            <td>{{studentDetails.au_full_name | titlecase}}</td>
                        </tr>
                        <tr>
                            <td><span>Class/Section</span></td>
                            <td><span>:</span></td>
                            <td>{{studentDetails.class_name}} - {{studentDetails.sec_name}}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-3" *ngIf="studentDetails">
                    <table>
                        <tr>
                            <td><span>Father's Name</span></td>
                            <td><span>:</span></td>
                            <td>{{studentDetails.father_name | titlecase}}</td>
                        </tr>
                        <tr>
                            <td><span>Mother's Name</span></td>
                            <td><span>:</span></td>
                            <td>{{studentDetails.mother_name | titlecase}}</td>
                        </tr>
                        <tr>
                            <td><span>Date of Birth</span></td>
                            <td><span>:</span></td>
                            <td>{{studentDetails.upd_dob | date:'d-MMM-y'}}</td>
                        </tr>
                        <!-- <tr>
                            <td><span>Class/Section</span></td>
                            <td><span>:</span></td>
                            <td>{{studentDetails.class_name}} - {{studentDetails.sec_name}}</td>
                        </tr> -->
                        <!-- <tr>
                            <td><span>No. of Days Present</span></td>
                            <td><span>:</span></td>
                            <td>{{totalpresentday}}</td>
                        </tr> -->
                    </table>
                </div>
                <div class="col-2">
                    <table>
                        <tr>
                            <td><span>Total Meetings</span></td>
                            <td><span>:</span></td>
                            <td>{{totalworkingdays}}</td>
                        </tr>
                        <tr>
                            <td><span>Meetings Present</span></td>
                            <td><span>:</span></td>
                            <td>{{totalpresentday}}</td>
                        </tr>
                        <tr>
                            <td><span>Attendance (%)</span></td>
                            <td><span>:</span></td>
                            <td>{{attendenceInPercent}}</td>
                        </tr>

                    </table>
                    <!-- <div class="stu-image-div">
                        <img style="width: 80px; height: 100px" [src]="defaultsrc"
                            onError="this.src='https://s3.ap-south-1.amazonaws.com/files.invictusdigisoft.com/images/man.svg'">
                    </div> -->
                    <!-- <div [ngStyle]="{'background-image': 'url(' + defaultsrc + ')', 'height':'140px', 'width': '120px'}"></div> -->
                </div>
                <div class="col-2">
                    <table>
                        <tr *ngIf="showHealthStatus">
                            <td><span>Height (cm )</span></td>
                            <td><span>:</span></td>
                            <td>{{studentDetails && studentDetails?.height ? studentDetails.height : '-'}}</td>
                        </tr>
                        <tr *ngIf="showHealthStatus">
                            <td><span>Weight (kg )</span></td>
                            <td><span>:</span></td>
                            <td>{{studentDetails && studentDetails?.weight ? studentDetails.weight : '-'}}</td>
                        </tr>
                        <tr *ngIf="showHealthStatus">
                            <td><span>BMI</span></td>
                            <td><span>:</span></td>
                            <td>{{studentDetails && studentDetails?.bmi ? studentDetails.bmi : '-'}}</td>
                        </tr>
                    </table>
                </div>
                <div class="col-2">
                    <table>
                        <tr>
                            <td class="text-center">

                                <img style="width: 80px; height: 100px;margin-top:-48px;margin-left:28%"
                                    [src]="defaultsrc"
                                    onError="this.src='https://s3.ap-south-1.amazonaws.com/files.invictusdigisoft.com/images/man.svg'">

                            </td>
                        </tr>

                        <tr>
                            <td><span>Admission No.</span></td>
                            <td><span>:</span></td>
                            <td>{{studentDetails?.em_admission_no}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <!-- user selected subexam or subexam exist -->
            <ng-container *ngIf="data.param.eme_subexam_id && data.param.eme_subexam_id.length > 0">
                <ng-template [ngIf]="data.ect_exam_type == 2">
                    <ng-template [ngIf]="obtainedGradeAvgHighest.subjectwise_bifurcation"
                        [ngIfElse]="not_subjectwise_bifurcation_subexam">
                        <div class="row" *ngFor="let term of termArray">
                            <div class="col-12" *ngIf="sflag && eflag && gflag && sexamArray.length > 0">
                                <!-- scholastic subject A -->
                                <ng-container *ngIf="getSubjectTypeAndCategoryStatus('1','A', subjectArray)">
                                    <table class="table-100 custom-table" style="margin-bottom: 15px">
                                        <thead>
                                            <tr class="custom-tr">
                                                <th [attr.colspan]="2" class="custom-th text-center" width="200px">
                                                    Scholastic Area A</th>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <th [attr.colspan]="(sexamArray[0].exam_sub_exam_max_marks.length) * 2"
                                                        class="custom-th text-center">
                                                        Term-{{term}}</th>
                                                </ng-container>
                                            </tr>
                                            <tr class="custom-tr">
                                                <th [attr.colspan]="2" class="custom-th text-center">Subject Name</th>
                                                <th [attr.colspan]="2" class="custom-th text-center"
                                                    *ngFor="let item of sexamArray[0].exam_sub_exam_max_marks">
                                                    {{item.sexam_name | titlecase}}
                                                    <br>({{item.exam_max_marks}})</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let sub of subjectArray">
                                                <ng-template [ngIf]="sub.childSub.length == 0"
                                                    [ngIfElse]="childdiv_subexam">
                                                    <tr class="custom-tr"
                                                        *ngIf="sub.sub_type == 1 && sub.sub_category == 'A'">
                                                        <ng-container *ngIf="sub.ess_additional == 0">
                                                            <td [attr.colspan]="2"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}}</td>
                                                        </ng-container>
                                                        <ng-container *ngIf="sub.ess_additional == 1">
                                                            <td [attr.colspan]="2"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}} (Add.)
                                                            </td>
                                                        </ng-container>
                                                        <ng-container
                                                            *ngFor="let item of sexamArray[0].exam_sub_exam_max_marks">
                                                            <td class="custom-td"></td>
                                                            <td class="custom-td">
                                                                {{getCalculatedMarksSubSubexam(sub.sub_id, data.param.eme_exam_id, term, item.se_id)}}
                                                            </td>
                                                        </ng-container>
                                                    </tr>
                                                </ng-template>
                                                <ng-template #childdiv_subexam>
                                                    <tr class="custom-tr"
                                                        *ngIf="sub.sub_type == 1 && sub.sub_category == 'A'">
                                                        <ng-container *ngIf="sub.ess_additional == 0">
                                                            <td [attr.rowspan]="sub.childSub.length"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}}
                                                            </td>
                                                        </ng-container>
                                                        <ng-container *ngIf="sub.ess_additional == 1">
                                                            <td [attr.rowspan]="sub.childSub.length"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}}
                                                                (Add.)
                                                            </td>
                                                        </ng-container>
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub.childSub[0].sub_name}}</td>
                                                        <ng-container
                                                            *ngFor="let item of sexamArray[0].exam_sub_exam_max_marks">
                                                            <td class="custom-td">
                                                                {{getCalculatedMarksSubexam(sub.childSub[0].sub_id, data.param.eme_exam_id, term, item.se_id)}}
                                                            </td>
                                                            <td [attr.rowspan]="sub.childSub.length" class="custom-td">
                                                                {{getCalculatedMarksSubSubexam(sub.sub_id, data.param.eme_exam_id, term, item.se_id)}}
                                                            </td>
                                                        </ng-container>
                                                    </tr>
                                                    <ng-container *ngFor="let sub1 of sub.childSub; let i=index">
                                                        <tr class="custom-tr" *ngIf="sub1.sub_type == 1 && i!=0">
                                                            <td class="custom-td text-left padding-left-8px">
                                                                {{sub1.sub_name}}
                                                            </td>
                                                            <ng-container
                                                                *ngFor="let item of sexamArray[0].exam_sub_exam_max_marks">
                                                                <td class="custom-td">
                                                                    {{getCalculatedMarksSubexam(sub1.sub_id, data.param.eme_exam_id, term, item.se_id)}}
                                                                </td>
                                                            </ng-container>
                                                        </tr>
                                                    </ng-container>
                                                </ng-template>
                                            </ng-container>
                                        </tbody>

                                    </table>
                                </ng-container>

                                <!-- scholastic subject B -->
                                <ng-container *ngIf="getSubjectTypeAndCategoryStatus('1','B', subjectArray)">
                                    <table class="table-100 custom-table" style="margin-bottom: 15px">
                                        <thead>
                                            <tr class="custom-tr">
                                                <th [attr.colspan]="2" class="custom-th text-center" width="200px">
                                                    Scholastic Area B</th>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <th [attr.colspan]="(sexamArray[0].exam_sub_exam_max_marks.length) * 2"
                                                        class="custom-th text-center">
                                                        Term-{{term}}</th>
                                                </ng-container>
                                            </tr>
                                            <tr class="custom-tr">
                                                <th [attr.colspan]="2" class="custom-th text-center">Subject Name</th>
                                                <th [attr.colspan]="2" class="custom-th text-center"
                                                    *ngFor="let item of sexamArray[0].exam_sub_exam_max_marks">
                                                    {{item.sexam_name | titlecase}}
                                                    <br>({{item.exam_max_marks}})</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let sub of subjectArray">
                                                <ng-template [ngIf]="sub.childSub.length == 0"
                                                    [ngIfElse]="childdiv_subexam">
                                                    <tr class="custom-tr"
                                                        *ngIf="sub.sub_type == 1 && sub.sub_category == 'B'">
                                                        <ng-container *ngIf="sub.ess_additional == 0">
                                                            <td [attr.colspan]="2"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}}</td>
                                                        </ng-container>
                                                        <ng-container *ngIf="sub.ess_additional == 1">
                                                            <td [attr.colspan]="2"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}} (Add.)
                                                            </td>
                                                        </ng-container>
                                                        <ng-container
                                                            *ngFor="let item of sexamArray[0].exam_sub_exam_max_marks">
                                                            <td class="custom-td"></td>
                                                            <td class="custom-td">
                                                                {{getCalculatedMarksSubSubexam(sub.sub_id, data.param.eme_exam_id, term, item.se_id)}}
                                                            </td>
                                                        </ng-container>
                                                    </tr>
                                                </ng-template>
                                                <ng-template #childdiv_subexam>
                                                    <tr class="custom-tr"
                                                        *ngIf="sub.sub_type == 1 && sub.sub_category == 'B'">
                                                        <ng-container *ngIf="sub.ess_additional == 0">
                                                            <td [attr.rowspan]="sub.childSub.length"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}}
                                                            </td>
                                                        </ng-container>
                                                        <ng-container *ngIf="sub.ess_additional == 1">
                                                            <td [attr.rowspan]="sub.childSub.length"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}}
                                                                (Add.)
                                                            </td>
                                                        </ng-container>
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub.childSub[0].sub_name}}</td>
                                                        <ng-container
                                                            *ngFor="let item of sexamArray[0].exam_sub_exam_max_marks">
                                                            <td class="custom-td">
                                                                {{getCalculatedMarksSubexam(sub.childSub[0].sub_id, data.param.eme_exam_id, term, item.se_id)}}
                                                            </td>
                                                            <td [attr.rowspan]="sub.childSub.length" class="custom-td">
                                                                {{getCalculatedMarksSubSubexam(sub.sub_id, data.param.eme_exam_id, term, item.se_id)}}
                                                            </td>
                                                        </ng-container>
                                                    </tr>
                                                    <ng-container *ngFor="let sub1 of sub.childSub; let i=index">
                                                        <tr class="custom-tr" *ngIf="sub1.sub_type == 1 && i!=0">
                                                            <td class="custom-td text-left padding-left-8px">
                                                                {{sub1.sub_name}}
                                                            </td>
                                                            <ng-container
                                                                *ngFor="let item of sexamArray[0].exam_sub_exam_max_marks">
                                                                <td class="custom-td">
                                                                    {{getCalculatedMarksSubexam(sub1.sub_id, data.param.eme_exam_id, term, item.se_id)}}
                                                                </td>
                                                            </ng-container>
                                                        </tr>
                                                    </ng-container>
                                                </ng-template>
                                            </ng-container>
                                        </tbody>

                                    </table>
                                </ng-container>

                            </div>
                        </div>
                    </ng-template>
                    <ng-template #not_subjectwise_bifurcation_subexam>
                        <div class="row" *ngFor="let term of termArray">
                            <div class="col-12" *ngIf="sflag && eflag && gflag && sexamArray.length > 0">
                                <ng-container *ngIf="getSubjectTypeAndCategoryStatus('1','A', subjectArray)">
                                    <table class="table-100 custom-table" style="margin-bottom: 15px">
                                        <thead>
                                            <tr class="custom-tr">
                                                <th class="custom-th text-center" width="200px">Scholastic Area A</th>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <th [attr.colspan]="sexamArray[0].exam_sub_exam_max_marks.length"
                                                        class="custom-th text-center">
                                                        Term-{{term}}</th>
                                                </ng-container>
                                            </tr>
                                            <tr class="custom-tr">
                                                <th class="custom-th text-center">Subject Name</th>
                                                <th class="custom-th text-center"
                                                    *ngFor="let item of sexamArray[0].exam_sub_exam_max_marks">
                                                    {{item.sexam_name | titlecase}}
                                                    <br>({{item.exam_max_marks}})</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let sub of subjectArray">
                                                <tr class="custom-tr"
                                                    *ngIf="sub.sub_type == 1 && sub.sub_category == 'A'">
                                                    <ng-container *ngIf="sub.ess_additional == 0">
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub.sub_name}}
                                                        </td>
                                                    </ng-container>
                                                    <ng-container *ngIf="sub.ess_additional == 1">
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub.sub_name}}
                                                            (Add.)
                                                        </td>
                                                    </ng-container>
                                                    <td class="custom-td"
                                                        *ngFor="let item of sexamArray[0].exam_sub_exam_max_marks">
                                                        {{getCalculatedMarksSubSubexam(sub.sub_id, data.param.eme_exam_id, term, item.se_id)}}
                                                    </td>

                                                </tr>
                                            </ng-container>
                                        </tbody>
                                    </table>
                                </ng-container>

                                <ng-container *ngIf="getSubjectTypeAndCategoryStatus('1','B', subjectArray)">
                                    <table class="table-100 custom-table" style="margin-bottom: 15px">
                                        <thead>
                                            <tr class="custom-tr">
                                                <th class="custom-th text-center" width="200px">Scholastic Area B</th>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <th [attr.colspan]="sexamArray[0].exam_sub_exam_max_marks.length"
                                                        class="custom-th text-center">
                                                        Term-{{term}}</th>
                                                </ng-container>
                                            </tr>
                                            <tr class="custom-tr">
                                                <th class="custom-th text-center">Subject Name</th>
                                                <th class="custom-th text-center"
                                                    *ngFor="let item of sexamArray[0].exam_sub_exam_max_marks">
                                                    {{item.sexam_name | titlecase}}
                                                    <br>({{item.exam_max_marks}})</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let sub of subjectArray">
                                                <tr class="custom-tr"
                                                    *ngIf="sub.sub_type == 1 && sub.sub_category == 'B'">
                                                    <ng-container *ngIf="sub.ess_additional == 0">
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub.sub_name}}
                                                        </td>
                                                    </ng-container>
                                                    <ng-container *ngIf="sub.ess_additional == 1">
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub.sub_name}}
                                                            (Add.)
                                                        </td>
                                                    </ng-container>
                                                    <td class="custom-td"
                                                        *ngFor="let item of sexamArray[0].exam_sub_exam_max_marks">
                                                        {{getCalculatedMarksSubSubexam(sub.sub_id, data.param.eme_exam_id, term, item.se_id)}}
                                                    </td>

                                                </tr>
                                            </ng-container>
                                        </tbody>
                                    </table>
                                </ng-container>

                            </div>
                        </div>
                    </ng-template>
                </ng-template>
            </ng-container>
            <!-- user not selected subexam or subexam does not exist -->
            <ng-container *ngIf="!(data.param.eme_subexam_id && data.param.eme_subexam_id.length > 0)">
                <ng-template [ngIf]="data.ect_exam_type == 2" [ngIfElse]="ccepattern">
                    <ng-template [ngIf]="obtainedGradeAvgHighest.subjectwise_bifurcation"
                        [ngIfElse]="not_subjectwise_bifurcation">
                        <div class="row" *ngFor="let term of termArray">
                            <!-- scholstic exam Subjectwise bifurcation-->
                            <div class="col-12" *ngIf="sflag && eflag && gflag && sexamArray.length > 0">
                                <!-- scholastic subject A -->
                                <ng-container *ngIf="getSubjectTypeAndCategoryStatus('1','A', subjectArray)">
                                    <table class="table-100 custom-table" style="margin-bottom: 15px">
                                        <thead>
                                            <tr class="custom-tr">
                                                <th [attr.colspan]="2" class="custom-th text-center" width="200px">
                                                    Scholastic
                                                    Area A</th>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <th [attr.colspan]="sexamArray.length + exambifurcateCount + obtainedGradeAvgHighestCount"
                                                        class="custom-th text-center">
                                                        Term
                                                        -{{term}}
                                                        ({{acedemicmarks}} Marks)</th>
                                                </ng-container>
                                            </tr>
                                            <tr class="custom-tr">
                                                <th [attr.colspan]="2" class="custom-th text-center">Subject Name</th>
                                                <ng-container *ngFor="let item of sexamArray">
                                                    <th [attr.colspan]="getExambirfurcateColspan(item)"
                                                        class="custom-th text-center">
                                                        {{item.exam_name | titlecase}}
                                                        <br>({{item.exam_weightage}})</th>
                                                </ng-container>

                                                <th *ngIf="obtainedGradeAvgHighest.obtained"
                                                    class="custom-th text-center">
                                                    Marks
                                                    Obtained<br>({{acedemicmarks}})</th>
                                                <th *ngIf="obtainedGradeAvgHighest.grade" class="custom-th text-center">
                                                    Grade
                                                </th>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <th *ngIf="obtainedGradeAvgHighest.avg"
                                                        class="custom-th text-center">
                                                        Average
                                                    </th>
                                                    <th *ngIf="obtainedGradeAvgHighest.highest"
                                                        class="custom-th text-center">
                                                        Highest</th>
                                                </ng-container>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let sub of subjectArray">
                                                <ng-template [ngIf]="sub.childSub.length == 0" [ngIfElse]="childdiv">
                                                    <tr class="custom-tr"
                                                        *ngIf="sub.sub_type == 1 && sub.sub_category == 'A'">
                                                        <ng-container *ngIf="sub.ess_additional == 0">
                                                            <td [attr.colspan]="2"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}}</td>
                                                        </ng-container>
                                                        <ng-container *ngIf="sub.ess_additional == 1">
                                                            <td [attr.colspan]="2"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}} (Add.)
                                                            </td>
                                                        </ng-container>
                                                        <ng-container *ngFor="let item of sexamArray">
                                                            <td class="custom-td"
                                                                *ngIf="item.exam_bifurcate.bifurcated_marks"></td>
                                                            <td class="custom-td">
                                                                {{getCalculatedMarksSub(sub.sub_id, item.exam_id,term)}}
                                                            </td>
                                                        </ng-container>
                                                        <td *ngIf="obtainedGradeAvgHighest.obtained" class="custom-td">
                                                            {{calculateTotal(sub.sub_id,term)}}
                                                            {{getSubjectPassResult(sub.sub_id,term)}}</td>
                                                        <td *ngIf="obtainedGradeAvgHighest.grade" class="custom-td">
                                                            {{calculateGrade(sub.sub_id,term)}}</td>
                                                        <ng-container *ngIf="term == data.param.eme_term_id">
                                                            <td *ngIf="obtainedGradeAvgHighest.avg" class="custom-td">
                                                                {{getClassAverage(sub.sub_id)}}</td>
                                                            <td *ngIf="obtainedGradeAvgHighest.highest"
                                                                class="custom-td">
                                                                {{getClassHighest(sub.sub_id)}}</td>
                                                        </ng-container>
                                                    </tr>
                                                </ng-template>
                                                <ng-template #childdiv>
                                                    <tr class="custom-tr"
                                                        *ngIf="sub.sub_type == 1 && sub.sub_category == 'A'">
                                                        <ng-container *ngIf="sub.ess_additional == 0">
                                                            <td [attr.rowspan]="sub.childSub.length"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}}
                                                            </td>
                                                        </ng-container>
                                                        <ng-container *ngIf="sub.ess_additional == 1">
                                                            <td [attr.rowspan]="sub.childSub.length"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}}
                                                                (Add.)
                                                            </td>
                                                        </ng-container>
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub.childSub[0].sub_name}}</td>
                                                        <ng-container *ngFor="let item of sexamArray">
                                                            <td class="custom-td"
                                                                *ngIf="item.exam_bifurcate.bifurcated_marks">
                                                                {{getCalculatedMarksSubsubject(sub.sub_id, item.exam_id,term,sub.childSub[0].sub_id)}}
                                                            </td>
                                                            <td [attr.rowspan]="sub.childSub.length" class="custom-td">
                                                                {{getCalculatedMarksSub(sub.sub_id, item.exam_id,term)}}
                                                            </td>
                                                        </ng-container>

                                                        <td [attr.rowspan]="sub.childSub.length"
                                                            *ngIf="obtainedGradeAvgHighest.obtained" class="custom-td">
                                                            {{calculateTotal(sub.sub_id,term)}}
                                                            {{getSubjectPassResult(sub.sub_id,term)}}</td>
                                                        <td [attr.rowspan]="sub.childSub.length"
                                                            *ngIf="obtainedGradeAvgHighest.grade" class="custom-td">
                                                            {{calculateGrade(sub.sub_id,term)}}</td>
                                                        <ng-container *ngIf="term == data.param.eme_term_id">
                                                            <td [attr.rowspan]="sub.childSub.length"
                                                                *ngIf="obtainedGradeAvgHighest.avg" class="custom-td">
                                                                {{getClassAverage(sub.sub_id)}}</td>
                                                            <td [attr.rowspan]="sub.childSub.length"
                                                                *ngIf="obtainedGradeAvgHighest.highest"
                                                                class="custom-td">
                                                                {{getClassHighest(sub.sub_id)}}</td>
                                                        </ng-container>
                                                    </tr>
                                                    <ng-container *ngFor="let sub1 of sub.childSub; let i=index">
                                                        <tr class="custom-tr" *ngIf="sub1.sub_type == 1 && i!=0">
                                                            <td class="custom-td text-left padding-left-8px">
                                                                {{sub1.sub_name}}
                                                            </td>
                                                            <ng-container *ngFor="let item of sexamArray">
                                                                <td class="custom-td"
                                                                    *ngIf="item.exam_bifurcate.bifurcated_marks">
                                                                    {{getCalculatedMarksSubsubject(sub.sub_id, item.exam_id,term,sub1.sub_id)}}
                                                                </td>
                                                            </ng-container>
                                                        </tr>
                                                    </ng-container>
                                                </ng-template>
                                            </ng-container>
                                            <tr class="custom-tr">
                                                <td [attr.colspan]="2" class="custom-td text-left padding-left-8px">
                                                    Total({{getTotalMainSubject('A')}}
                                                    main subject)</td>
                                                <td class="custom-td"
                                                    [attr.colspan]="sexamArray.length + exambifurcateCount"></td>
                                                <td *ngIf="obtainedGradeAvgHighest.obtained" class="custom-td">
                                                    {{getPassTotalPercentage(term)}}%</td>
                                                <td *ngIf="obtainedGradeAvgHighest.grade" class="custom-td"></td>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <td *ngIf="obtainedGradeAvgHighest.avg" class="custom-td"></td>
                                                    <td *ngIf="obtainedGradeAvgHighest.highest" class="custom-td"></td>
                                                </ng-container>
                                            </tr>
                                        </tbody>

                                    </table>
                                </ng-container>

                                <!-- scholastic subject B -->
                                <ng-container *ngIf="getSubjectTypeAndCategoryStatus('1','B', subjectArray)">
                                    <table class="table-100 custom-table" style="margin-bottom: 15px">
                                        <thead>
                                            <tr class="custom-tr">
                                                <th [attr.colspan]="2" class="custom-th text-center" width="200px">
                                                    Scholastic
                                                    Area B</th>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <th [attr.colspan]="sexamArray.length + exambifurcateCount + obtainedGradeAvgHighestCount"
                                                        class="custom-th text-center">
                                                        Term
                                                        -{{term}}
                                                        ({{acedemicmarks}} Marks)</th>
                                                </ng-container>
                                            </tr>
                                            <tr class="custom-tr">
                                                <th [attr.colspan]="2" class="custom-th text-center">Subject Name</th>
                                                <ng-container *ngFor="let item of sexamArray">
                                                    <th [attr.colspan]="getExambirfurcateColspan(item)"
                                                        class="custom-th text-center">
                                                        {{item.exam_name | titlecase}}
                                                        <br>({{item.exam_weightage}})</th>
                                                </ng-container>

                                                <th *ngIf="obtainedGradeAvgHighest.obtained"
                                                    class="custom-th text-center">
                                                    Marks
                                                    Obtained<br>({{acedemicmarks}})</th>
                                                <th *ngIf="obtainedGradeAvgHighest.grade" class="custom-th text-center">
                                                    Grade
                                                </th>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <th *ngIf="obtainedGradeAvgHighest.avg"
                                                        class="custom-th text-center">
                                                        Average
                                                    </th>
                                                    <th *ngIf="obtainedGradeAvgHighest.highest"
                                                        class="custom-th text-center">
                                                        Highest</th>
                                                </ng-container>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let sub of subjectArray">
                                                <ng-template [ngIf]="sub.childSub.length == 0" [ngIfElse]="childdiv">
                                                    <tr class="custom-tr"
                                                        *ngIf="sub.sub_type == 1 && sub.sub_category == 'B'">
                                                        <ng-container *ngIf="sub.ess_additional == 0">
                                                            <td [attr.colspan]="2"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}}</td>
                                                        </ng-container>
                                                        <ng-container *ngIf="sub.ess_additional == 1">
                                                            <td [attr.colspan]="2"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}} (Add.)
                                                            </td>
                                                        </ng-container>
                                                        <ng-container *ngFor="let item of sexamArray">
                                                            <td class="custom-td"
                                                                *ngIf="item.exam_bifurcate.bifurcated_marks"></td>
                                                            <td class="custom-td">
                                                                {{getCalculatedMarksSub(sub.sub_id, item.exam_id,term)}}
                                                            </td>
                                                        </ng-container>
                                                        <td *ngIf="obtainedGradeAvgHighest.obtained" class="custom-td">
                                                            {{calculateTotal(sub.sub_id,term)}}
                                                            {{getSubjectPassResult(sub.sub_id,term)}}</td>
                                                        <td *ngIf="obtainedGradeAvgHighest.grade" class="custom-td">
                                                            {{calculateGrade(sub.sub_id,term)}}</td>
                                                        <ng-container *ngIf="term == data.param.eme_term_id">
                                                            <td *ngIf="obtainedGradeAvgHighest.avg" class="custom-td">
                                                                {{getClassAverage(sub.sub_id)}}</td>
                                                            <td *ngIf="obtainedGradeAvgHighest.highest"
                                                                class="custom-td">
                                                                {{getClassHighest(sub.sub_id)}}</td>
                                                        </ng-container>
                                                    </tr>
                                                </ng-template>
                                                <ng-template #childdiv>
                                                    <tr class="custom-tr"
                                                        *ngIf="sub.sub_type == 1 && sub.sub_category == 'B'">
                                                        <ng-container *ngIf="sub.ess_additional == 0">
                                                            <td [attr.rowspan]="sub.childSub.length"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}}
                                                            </td>
                                                        </ng-container>
                                                        <ng-container *ngIf="sub.ess_additional == 1">
                                                            <td [attr.rowspan]="sub.childSub.length"
                                                                class="custom-td text-left padding-left-8px">
                                                                {{sub.sub_name}}
                                                                (Add.)
                                                            </td>
                                                        </ng-container>
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub.childSub[0].sub_name}}</td>
                                                        <ng-container *ngFor="let item of sexamArray">
                                                            <td class="custom-td"
                                                                *ngIf="item.exam_bifurcate.bifurcated_marks">
                                                                {{getCalculatedMarksSubsubject(sub.sub_id, item.exam_id,term,sub.childSub[0].sub_id)}}
                                                            </td>
                                                            <td [attr.rowspan]="sub.childSub.length" class="custom-td">
                                                                {{getCalculatedMarksSub(sub.sub_id, item.exam_id,term)}}
                                                            </td>
                                                        </ng-container>

                                                        <td [attr.rowspan]="sub.childSub.length"
                                                            *ngIf="obtainedGradeAvgHighest.obtained" class="custom-td">
                                                            {{calculateTotal(sub.sub_id,term)}}
                                                            {{getSubjectPassResult(sub.sub_id,term)}}</td>
                                                        <td [attr.rowspan]="sub.childSub.length"
                                                            *ngIf="obtainedGradeAvgHighest.grade" class="custom-td">
                                                            {{calculateGrade(sub.sub_id,term)}}</td>
                                                        <ng-container *ngIf="term == data.param.eme_term_id">
                                                            <td [attr.rowspan]="sub.childSub.length"
                                                                *ngIf="obtainedGradeAvgHighest.avg" class="custom-td">
                                                                {{getClassAverage(sub.sub_id)}}</td>
                                                            <td [attr.rowspan]="sub.childSub.length"
                                                                *ngIf="obtainedGradeAvgHighest.highest"
                                                                class="custom-td">
                                                                {{getClassHighest(sub.sub_id)}}</td>
                                                        </ng-container>
                                                    </tr>
                                                    <ng-container *ngFor="let sub1 of sub.childSub; let i=index">
                                                        <tr class="custom-tr" *ngIf="sub1.sub_type == 1 && i!=0">
                                                            <td class="custom-td text-left padding-left-8px">
                                                                {{sub1.sub_name}}
                                                            </td>
                                                            <ng-container *ngFor="let item of sexamArray">
                                                                <td class="custom-td"
                                                                    *ngIf="item.exam_bifurcate.bifurcated_marks">
                                                                    {{getCalculatedMarksSubsubject(sub.sub_id, item.exam_id,term,sub1.sub_id)}}
                                                                </td>
                                                            </ng-container>
                                                        </tr>
                                                    </ng-container>
                                                </ng-template>
                                            </ng-container>
                                            <tr class="custom-tr">
                                                <td [attr.colspan]="2" class="custom-td text-left padding-left-8px">
                                                    Total({{getTotalMainSubject('B')}}
                                                    main subject)</td>
                                                <td class="custom-td"
                                                    [attr.colspan]="sexamArray.length + exambifurcateCount"></td>
                                                <td *ngIf="obtainedGradeAvgHighest.obtained" class="custom-td">
                                                    {{getPassTotalPercentage(term,'B')}}%</td>
                                                <td *ngIf="obtainedGradeAvgHighest.grade" class="custom-td"></td>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <td *ngIf="obtainedGradeAvgHighest.avg" class="custom-td"></td>
                                                    <td *ngIf="obtainedGradeAvgHighest.highest" class="custom-td"></td>
                                                </ng-container>
                                            </tr>
                                        </tbody>

                                    </table>
                                </ng-container>

                            </div>
                            <!-- co-scholstic exam Subjectwise bifurcation -->
                            <div class="col-12" *ngIf="sflag && eflag && gflag && cexamArray.length > 0">
                                <ng-container *ngIf="getSubjectTypeAndCategoryStatus('2','A', subjectArray)">
                                    <table class="custom-table table-100">
                                        <thead>
                                            <tr class="custom-tr">
                                                <th class="custom-th text-left padding-left-8px"> &nbsp;Co-Scholastic
                                                    Area A &nbsp;
                                                    <span *ngIf="GradeSetPoint.length>0" class="coscholastic-grade"> 
                                                        (
                                                        <span *ngFor="let item of GradeSetPoint" style="padding: 5px 0">
                                                            {{item?.egs_grade_name}} <span *ngIf="item?.egs_grade_text">- {{item?.egs_grade_text}} </span> 
                                                            
                                                        </span>
                                                        )
                                                    </span>

                                                </th>
                                                <th class="custom-th text-center">Grade</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let sub of subjectArray">
                                                <tr *ngIf="sub.sub_type == 2 && sub.sub_category == 'A'">
                                                    <td class="custom-td padding-left-8px text-left">{{sub.sub_name}}
                                                    </td>
                                                    <td class="custom-td text-center">
                                                        {{calculateGradePoint(sub.sub_id, term)}}
                                                    </td>
                                                </tr>
                                            </ng-container>
                                        </tbody>
                                    </table>
                                </ng-container>

                                <ng-container *ngIf="getSubjectTypeAndCategoryStatus('2','B', subjectArray)">
                                    <br>
                                    <table class="custom-table table-100">
                                        <thead>
                                            <tr class="custom-tr">
                                                <th class="custom-th padding-left-8px text-left"> &nbsp;Co-Scholastic
                                                    Area B&nbsp;
                                                    <span *ngIf="GradeSetPoint.length > 0" class="coscholastic-grade">
                                                        (
                                                        <span *ngFor="let item of GradeSetPoint"
                                                            style="padding: 5px 0">
                                                            {{item?.egs_grade_name}} <span
                                                                *ngIf="item?.egs_grade_text">- {{item?.egs_grade_text}}                                                                 
                                                            </span>
                                                        </span>
                                                        )
                                                    </span>
                                                </th>
                                                <th class="custom-th text-center">Grade</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let sub of subjectArray">
                                                <tr *ngIf="sub.sub_type == 2 && sub.sub_category == 'B'">
                                                    <td class="custom-td padding-left-8px text-left">{{sub.sub_name}}
                                                    </td>
                                                    <td class="custom-td text-center">
                                                        {{calculateGradePoint(sub.sub_id, term)}}
                                                    </td>
                                                </tr>
                                            </ng-container>
                                        </tbody>
                                    </table>
                                </ng-container>

                            </div>
                        </div>
                    </ng-template>
                    <ng-template #not_subjectwise_bifurcation>
                        <div class="row" *ngFor="let term of termArray">
                            <div class="col-12" *ngIf="sflag && eflag && gflag && sexamArray.length > 0">
                                <!-- scholastic subject A -->
                                <ng-container *ngIf="getSubjectTypeAndCategoryStatus('1','A', subjectArray)">
                                    <table class="table-100 custom-table" style="margin-bottom: 15px">
                                        <thead>
                                            <tr class="custom-tr">
                                                <th class="custom-th text-center" width="200px">Scholastic Area A</th>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <th [attr.colspan]="sexamArray.length + obtainedGradeAvgHighestCount"
                                                        class="custom-th text-center">
                                                        Term
                                                        -{{term}}
                                                        ({{acedemicmarks}} Marks)</th>
                                                </ng-container>
                                            </tr>
                                            <tr class="custom-tr">
                                                <th class="custom-th text-center">Subject Name</th>
                                                <th class="custom-th text-center" *ngFor="let item of sexamArray">
                                                    {{item.exam_name | titlecase}}
                                                    <br>({{item.exam_weightage}})</th>
                                                <th *ngIf="obtainedGradeAvgHighest.obtained"
                                                    class="custom-th text-center">
                                                    Marks
                                                    Obtained<br>({{acedemicmarks}})</th>
                                                <th *ngIf="obtainedGradeAvgHighest.grade" class="custom-th text-center">
                                                    Grade
                                                </th>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <th *ngIf="obtainedGradeAvgHighest.avg"
                                                        class="custom-th text-center">
                                                        Average
                                                    </th>
                                                    <th *ngIf="obtainedGradeAvgHighest.highest"
                                                        class="custom-th text-center">
                                                        Highest</th>
                                                </ng-container>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let sub of subjectArray">
                                                <tr class="custom-tr"
                                                    *ngIf="sub.sub_type == 1 && sub.sub_category == 'A'">
                                                    <ng-container *ngIf="sub.ess_additional == 0">
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub.sub_name}}
                                                        </td>
                                                    </ng-container>
                                                    <ng-container *ngIf="sub.ess_additional == 1">
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub.sub_name}}
                                                            (Add.)
                                                        </td>
                                                    </ng-container>
                                                    <td class="custom-td" *ngFor="let item of sexamArray">
                                                        {{getCalculatedMarksSub(sub.sub_id, item.exam_id,term)}}</td>
                                                    <td *ngIf="obtainedGradeAvgHighest.obtained" class="custom-td">
                                                        {{calculateTotal(sub.sub_id,term)}}
                                                        {{getSubjectPassResult(sub.sub_id,term)}}</td>
                                                    <td *ngIf="obtainedGradeAvgHighest.grade" class="custom-td">
                                                        {{calculateGrade(sub.sub_id,term)}}</td>
                                                    <ng-container *ngIf="term == data.param.eme_term_id">
                                                        <td *ngIf="obtainedGradeAvgHighest.avg" class="custom-td">
                                                            {{getClassAverage(sub.sub_id)}}</td>
                                                        <td *ngIf="obtainedGradeAvgHighest.highest" class="custom-td">
                                                            {{getClassHighest(sub.sub_id)}}</td>
                                                    </ng-container>

                                                </tr>
                                            </ng-container>
                                            <tr class="custom-tr">
                                                <td class="custom-td text-left padding-left-8px">
                                                    Total({{getTotalMainSubject('A')}}
                                                    main subject)</td>
                                                <td class="custom-td" [attr.colspan]="sexamArray.length"></td>
                                                <td *ngIf="obtainedGradeAvgHighest.obtained" class="custom-td">
                                                    {{getPassTotalPercentage(term)}}%</td>
                                                <td *ngIf="obtainedGradeAvgHighest.grade" class="custom-td"></td>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <td *ngIf="obtainedGradeAvgHighest.avg" class="custom-td"></td>
                                                    <td *ngIf="obtainedGradeAvgHighest.highest" class="custom-td"></td>
                                                </ng-container>
                                            </tr>
                                        </tbody>

                                    </table>
                                </ng-container>

                                <!-- scholastic subject B -->
                                <ng-container *ngIf="getSubjectTypeAndCategoryStatus('1','B', subjectArray)">
                                    <table class="table-100 custom-table" style="margin-bottom: 15px">
                                        <thead>
                                            <tr class="custom-tr">
                                                <th class="custom-th text-center" width="200px">Scholastic Area B</th>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <th [attr.colspan]="sexamArray.length + obtainedGradeAvgHighestCount"
                                                        class="custom-th text-center">
                                                        Term
                                                        -{{term}}
                                                        ({{acedemicmarks}} Marks)</th>
                                                </ng-container>
                                            </tr>
                                            <tr class="custom-tr">
                                                <th class="custom-th text-center">Subject Name</th>
                                                <th class="custom-th text-center" *ngFor="let item of sexamArray">
                                                    {{item.exam_name | titlecase}}
                                                    <br>({{item.exam_weightage}})</th>
                                                <th *ngIf="obtainedGradeAvgHighest.obtained"
                                                    class="custom-th text-center">
                                                    Marks
                                                    Obtained<br>({{acedemicmarks}})</th>
                                                <th *ngIf="obtainedGradeAvgHighest.grade" class="custom-th text-center">
                                                    Grade
                                                </th>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <th *ngIf="obtainedGradeAvgHighest.avg"
                                                        class="custom-th text-center">
                                                        Average
                                                    </th>
                                                    <th *ngIf="obtainedGradeAvgHighest.highest"
                                                        class="custom-th text-center">
                                                        Highest</th>
                                                </ng-container>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let sub of subjectArray">
                                                <tr class="custom-tr"
                                                    *ngIf="sub.sub_type == 1 && sub.sub_category == 'B'">
                                                    <ng-container *ngIf="sub.ess_additional == 0">
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub.sub_name}}
                                                        </td>
                                                    </ng-container>
                                                    <ng-container *ngIf="sub.ess_additional == 1">
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub.sub_name}}
                                                            (Add.)
                                                        </td>
                                                    </ng-container>
                                                    <td class="custom-td" *ngFor="let item of sexamArray">
                                                        {{getCalculatedMarksSub(sub.sub_id, item.exam_id,term)}}</td>
                                                    <td *ngIf="obtainedGradeAvgHighest.obtained" class="custom-td">
                                                        {{calculateTotal(sub.sub_id,term)}}
                                                        {{getSubjectPassResult(sub.sub_id,term)}}</td>
                                                    <td *ngIf="obtainedGradeAvgHighest.grade" class="custom-td">
                                                        {{calculateGrade(sub.sub_id,term)}}</td>
                                                    <ng-container *ngIf="term == data.param.eme_term_id">
                                                        <td *ngIf="obtainedGradeAvgHighest.avg" class="custom-td">
                                                            {{getClassAverage(sub.sub_id)}}</td>
                                                        <td *ngIf="obtainedGradeAvgHighest.highest" class="custom-td">
                                                            {{getClassHighest(sub.sub_id)}}</td>
                                                    </ng-container>

                                                </tr>
                                            </ng-container>
                                            <tr class="custom-tr">
                                                <td class="custom-td text-left padding-left-8px">
                                                    Total({{getTotalMainSubject('B')}}
                                                    main subject)</td>
                                                <td class="custom-td" [attr.colspan]="sexamArray.length"></td>
                                                <td *ngIf="obtainedGradeAvgHighest.obtained" class="custom-td">
                                                    {{getPassTotalPercentage(term,'B')}}%</td>
                                                <td *ngIf="obtainedGradeAvgHighest.grade" class="custom-td"></td>
                                                <ng-container *ngIf="term == data.param.eme_term_id">
                                                    <td *ngIf="obtainedGradeAvgHighest.avg" class="custom-td"></td>
                                                    <td *ngIf="obtainedGradeAvgHighest.highest" class="custom-td"></td>
                                                </ng-container>
                                            </tr>
                                        </tbody>

                                    </table>
                                </ng-container>

                            </div>
                            <!-- co-scholstic exam not Subjectwise bifurcation -->
                            <div class="col-12" *ngIf="sflag && eflag && gflag && cexamArray.length > 0">
                                <ng-container *ngIf="getSubjectTypeAndCategoryStatus('2','A', subjectArray)">
                                    <table class="custom-table table-100">
                                        <thead>
                                            <tr class="custom-tr">
                                                <th class="custom-th text-left padding-left-8px"> &nbsp;Co-Scholastic
                                                    Area A&nbsp;
                                                    <span *ngIf="GradeSetPoint.length > 0" class="coscholastic-grade">
                                                        (
                                                        <span *ngFor="let item of GradeSetPoint" style="padding: 5px 0">
                                                            {{item?.egs_grade_name}} <span
                                                                *ngIf="item?.egs_grade_text">- {{item?.egs_grade_text}}
                                                            </span>
                                                        </span>
                                                        )
                                                    </span>
                                                </th>
                                                <th class="custom-th text-center">Grade</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let sub of subjectArray">
                                                <tr *ngIf="sub.sub_type == 2 && sub.sub_category == 'A'">
                                                    <td class="custom-td padding-left-8px text-left">{{sub.sub_name}}
                                                    </td>
                                                    <td class="custom-td text-center">
                                                        {{calculateGradePoint(sub.sub_id, term)}}
                                                    </td>
                                                </tr>
                                            </ng-container>
                                        </tbody>
                                    </table>
                                </ng-container>
                                <ng-container *ngIf="getSubjectTypeAndCategoryStatus('2','B', subjectArray)">
                                    <br>
                                    <table class="custom-table table-100">
                                        <thead>
                                            <tr class="custom-tr">
                                                <th class="custom-th padding-left-8px text-left"> &nbsp;Co-Scholastic
                                                    Area B&nbsp;
                                                    <span *ngIf="GradeSetPoint.length > 0" class="coscholastic-grade">
                                                        (
                                                        <span *ngFor="let item of GradeSetPoint" style="padding: 5px 0">
                                                            {{item?.egs_grade_name}} <span *ngIf="item?.egs_grade_text"> - {{item?.egs_grade_text}}</span>
                                                        </span>
                                                        )
                                                    </span>
                                                </th>
                                                <th class="custom-th text-center">Grade</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <ng-container *ngFor="let sub of subjectArray">
                                                <tr *ngIf="sub.sub_type == 2 && sub.sub_category == 'B'">
                                                    <td class="custom-td padding-left-8px text-left">{{sub.sub_name}}
                                                    </td>
                                                    <td class="custom-td text-center">
                                                        {{calculateGradePoint(sub.sub_id, term)}}
                                                    </td>
                                                </tr>
                                            </ng-container>
                                        </tbody>
                                    </table>
                                </ng-container>
                            </div>
                        </div>
                    </ng-template>
                </ng-template>
                <ng-template #ccepattern>
                    <div class="row" *ngFor="let term of termArray">
                        <div class="col-12" *ngIf="sflag && eflag && gflag">
                            <!-- ccepattern scholastic subject A -->
                            <ng-container *ngIf="getSubjectTypeAndCategoryStatus('1','A', subjectArray)">
                                <table class="table-100 custom-table" style="margin-bottom: 15px">
                                    <thead>
                                        <tr class="custom-tr">
                                            <th [attr.colspan]="2" class="custom-th text-center" width="200px">
                                                Scholastic
                                                Area A</th>
                                            <ng-container *ngIf="obtainedGradeAvgHighest.remark">
                                                <th [attr.colspan]="2" class="custom-th text-center">Term -{{term}}
                                                </th>
                                            </ng-container>
                                            <ng-container *ngIf="!obtainedGradeAvgHighest.remark">
                                                <th class="custom-th text-center">Term -{{term}} </th>
                                            </ng-container>
                                        </tr>
                                        <tr class="custom-tr">
                                            <ng-container *ngIf="obtainedGradeAvgHighest.remark">
                                                <th width="40%" [attr.colspan]="2" class="custom-th text-center">Subject
                                                    Name
                                                </th>
                                                <th width="5%" class="custom-th text-center">Grade</th>
                                                <th *ngIf="obtainedGradeAvgHighest.remark" width="55%"
                                                    class="custom-th text-center">Remark</th>
                                            </ng-container>
                                            <ng-container *ngIf="!obtainedGradeAvgHighest.remark">
                                                <th width="80%" [attr.colspan]="2" class="custom-th text-center">Subject
                                                    Name
                                                </th>
                                                <th width="20%" class="custom-th text-center">Grade</th>
                                            </ng-container>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let sub of subjectArray">
                                            <ng-template [ngIf]="sub.childSub.length == 0" [ngIfElse]="childdiv1">
                                                <tr class="custom-tr"
                                                    *ngIf="sub.sub_type == 1 && sub.sub_category == 'A'">
                                                    <td class="custom-td text-left padding-left-8px" [attr.colspan]="2">
                                                        {{sub.sub_name | titlecase}}</td>
                                                    <td class="custom-td">{{calculateGradeCcePoint(sub.sub_id,term)}}
                                                    </td>
                                                    <td *ngIf="obtainedGradeAvgHighest.remark" class="custom-td">
                                                        {{remarkOfSub(sub.sub_id) | titlecase}}</td>
                                                </tr>
                                            </ng-template>
                                            <ng-template #childdiv1>
                                                <tr class="custom-tr"
                                                    *ngIf="sub.sub_type == 1 && sub.sub_category == 'A'">
                                                    <td class="custom-td text-left padding-left-8px"
                                                        [attr.rowspan]="sub.childSub.length">{{sub.sub_name}}</td>
                                                    <td class="custom-td text-left padding-left-8px">
                                                        {{sub.childSub[0].sub_name}}</td>
                                                    <td class="custom-td">
                                                        {{calculateGradeCcePoint(sub.childSub[0].sub_id,term)}}</td>
                                                    <td *ngIf="obtainedGradeAvgHighest.remark" class="custom-td"></td>
                                                </tr>
                                                <ng-container *ngFor="let sub1 of sub.childSub; let i=index">
                                                    <tr class="custom-tr" *ngIf="sub1.sub_type == 1 && i!=0">
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub1.sub_name}}
                                                        </td>
                                                        <td class="custom-td">
                                                            {{calculateGradeCcePoint(sub1.sub_id,term)}}
                                                        </td>
                                                        <td *ngIf="obtainedGradeAvgHighest.remark" class="custom-td">
                                                            {{remarkOfSub(sub1.sub_id) | titlecase}}</td>
                                                    </tr>
                                                </ng-container>
                                            </ng-template>
                                        </ng-container>
                                    </tbody>

                                </table>
                            </ng-container>
                            <!-- ccepattern scholastic subject B -->
                            <ng-container *ngIf="getSubjectTypeAndCategoryStatus('1','B', subjectArray)">
                                <table class="table-100 custom-table" style="margin-bottom: 15px">
                                    <thead>
                                        <tr class="custom-tr">
                                            <th [attr.colspan]="2" class="custom-th text-center" width="200px">
                                                Scholastic
                                                Area B</th>
                                            <ng-container *ngIf="obtainedGradeAvgHighest.remark">
                                                <th [attr.colspan]="2" class="custom-th text-center">Term -{{term}}
                                                </th>
                                            </ng-container>
                                            <ng-container *ngIf="!obtainedGradeAvgHighest.remark">
                                                <th class="custom-th text-center">Term -{{term}} </th>
                                            </ng-container>
                                        </tr>
                                        <tr class="custom-tr">
                                            <ng-container *ngIf="obtainedGradeAvgHighest.remark">
                                                <th width="40%" [attr.colspan]="2" class="custom-th text-center">Subject
                                                    Name
                                                </th>
                                                <th width="5%" class="custom-th text-center">Grade</th>
                                                <th *ngIf="obtainedGradeAvgHighest.remark" width="55%"
                                                    class="custom-th text-center">Remark</th>
                                            </ng-container>
                                            <ng-container *ngIf="!obtainedGradeAvgHighest.remark">
                                                <th width="80%" [attr.colspan]="2" class="custom-th text-center">Subject
                                                    Name
                                                </th>
                                                <th width="20%" class="custom-th text-center">Grade</th>
                                            </ng-container>

                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let sub of subjectArray">
                                            <ng-template [ngIf]="sub.childSub.length == 0" [ngIfElse]="childdiv1">
                                                <tr class="custom-tr"
                                                    *ngIf="sub.sub_type == 1 && sub.sub_category == 'B'">
                                                    <td class="custom-td text-left padding-left-8px" [attr.colspan]="2">
                                                        {{sub.sub_name | titlecase}}</td>
                                                    <td class="custom-td">{{calculateGradeCcePoint(sub.sub_id,term)}}
                                                    </td>
                                                    <td *ngIf="obtainedGradeAvgHighest.remark" class="custom-td">
                                                        {{remarkOfSub(sub.sub_id) | titlecase}}</td>
                                                </tr>
                                            </ng-template>
                                            <ng-template #childdiv1>
                                                <tr class="custom-tr"
                                                    *ngIf="sub.sub_type == 1 && sub.sub_category == 'B'">
                                                    <td class="custom-td text-left padding-left-8px"
                                                        [attr.rowspan]="sub.childSub.length">{{sub.sub_name}}</td>
                                                    <td class="custom-td text-left padding-left-8px">
                                                        {{sub.childSub[0].sub_name}}</td>
                                                    <td class="custom-td">
                                                        {{calculateGradeCcePoint(sub.childSub[0].sub_id,term)}}</td>
                                                    <td *ngIf="obtainedGradeAvgHighest.remark" class="custom-td"></td>
                                                </tr>
                                                <ng-container *ngFor="let sub1 of sub.childSub; let i=index">
                                                    <tr class="custom-tr" *ngIf="sub1.sub_type == 1 && i!=0">
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub1.sub_name}}
                                                        </td>
                                                        <td class="custom-td">
                                                            {{calculateGradeCcePoint(sub1.sub_id,term)}}
                                                        </td>
                                                        <td *ngIf="obtainedGradeAvgHighest.remark" class="custom-td">
                                                            {{remarkOfSub(sub1.sub_id) | titlecase}}</td>
                                                    </tr>
                                                </ng-container>
                                            </ng-template>
                                        </ng-container>
                                    </tbody>

                                </table>
                            </ng-container>

                        </div>
                        <div class="col-12" *ngIf="sflag && eflag && gflag && cexamArray.length > 0">
                            <ng-container *ngIf="getSubjectTypeAndCategoryStatus('2','A', subjectArray)">
                                <table class="custom-table table-100">
                                    <thead>
                                        <tr class="custom-tr">
                                            <ng-container *ngIf="obtainedGradeAvgHighest.remark">
                                                <th width="40%" [attr.colspan]="2" class="custom-th text-left">
                                                    &nbsp;Co-Scholastic Area A
                                                </th>
                                                <th width="5%" class="custom-th text-center">Grade</th>
                                                <th *ngIf="obtainedGradeAvgHighest.remark" width="55%"
                                                    class="custom-th text-center">Remark</th>
                                            </ng-container>
                                            <ng-container *ngIf="!obtainedGradeAvgHighest.remark">
                                                <th width="80%" [attr.colspan]="2" class="custom-th text-left">
                                                    &nbsp;Co-Scholastic Area A
                                                </th>
                                                <th width="20%" class="custom-th text-center">Grade</th>
                                            </ng-container>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let sub of subjectArray">
                                            <ng-template [ngIf]="sub.childSub.length == 0" [ngIfElse]="childdiv2">
                                                <tr class="custom-tr"
                                                    *ngIf="sub.sub_type == 2 && sub.sub_category == 'A'">
                                                    <td class="custom-td text-left padding-left-8px" [attr.colspan]="2">
                                                        {{sub.sub_name | titlecase}}</td>
                                                    <td class="custom-td">{{calculateGradePoint(sub.sub_id,term)}}</td>
                                                    <td *ngIf="obtainedGradeAvgHighest.remark" class="custom-td">
                                                        {{remarkOfSub(sub.sub_id) | titlecase}}</td>
                                                </tr>
                                            </ng-template>
                                            <ng-template #childdiv2>
                                                <tr class="custom-tr"
                                                    *ngIf="sub.sub_type == 2 && sub.sub_category == 'A'">
                                                    <td class="custom-td text-left padding-left-8px"
                                                        [attr.rowspan]="sub.childSub.length">{{sub.sub_name}}</td>
                                                    <td class="custom-td text-left padding-left-8px">
                                                        {{sub.childSub[0].sub_name}}</td>
                                                    <td class="custom-td">
                                                        {{calculateGradePoint(sub.childSub[0].sub_id,term)}}</td>
                                                    <td *ngIf="obtainedGradeAvgHighest.remark" class="custom-td"></td>
                                                </tr>
                                                <ng-container *ngFor="let sub1 of sub.childSub; let i=index">
                                                    <tr class="custom-tr" *ngIf="sub1.sub_type == 2 && i!=0">
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub1.sub_name}}
                                                        </td>
                                                        <td class="custom-td">{{calculateGradePoint(sub1.sub_id,term)}}
                                                        </td>
                                                        <td *ngIf="obtainedGradeAvgHighest.remark" class="custom-td">
                                                            {{remarkOfSub(sub1.sub_id) | titlecase}}</td>
                                                    </tr>
                                                </ng-container>
                                            </ng-template>
                                        </ng-container>
                                    </tbody>
                                </table>
                            </ng-container>
                            <ng-container *ngIf="getSubjectTypeAndCategoryStatus('2','B', subjectArray)">
                                <br>
                                <table class="custom-table table-100">
                                    <thead>
                                        <tr class="custom-tr">
                                            <ng-container *ngIf="obtainedGradeAvgHighest.remark">
                                                <th width="40%" [attr.colspan]="2" class="custom-th text-left">
                                                    &nbsp;Co-Scholastic Area B
                                                </th>
                                                <th width="5%" class="custom-th text-center">Grade</th>
                                                <th *ngIf="obtainedGradeAvgHighest.remark" width="55%"
                                                    class="custom-th text-center">Remark</th>
                                            </ng-container>
                                            <ng-container *ngIf="!obtainedGradeAvgHighest.remark">
                                                <th width="80%" [attr.colspan]="2" class="custom-th text-left">
                                                    &nbsp;Co-Scholastic Area B
                                                </th>
                                                <th width="20%" class="custom-th text-center">Grade</th>
                                            </ng-container>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <ng-container *ngFor="let sub of subjectArray">
                                            <ng-template [ngIf]="sub.childSub.length == 0" [ngIfElse]="childdiv2">
                                                <tr class="custom-tr"
                                                    *ngIf="sub.sub_type == 2 && sub.sub_category == 'B'">
                                                    <td class="custom-td text-left padding-left-8px" [attr.colspan]="2">
                                                        {{sub.sub_name | titlecase}}</td>
                                                    <td class="custom-td">{{calculateGradePoint(sub.sub_id,term)}}</td>
                                                    <td *ngIf="obtainedGradeAvgHighest.remark" class="custom-td">
                                                        {{remarkOfSub(sub.sub_id) | titlecase}}</td>
                                                </tr>
                                            </ng-template>
                                            <ng-template #childdiv2>
                                                <tr class="custom-tr"
                                                    *ngIf="sub.sub_type == 2 && sub.sub_category == 'B'">
                                                    <td class="custom-td text-left padding-left-8px"
                                                        [attr.rowspan]="sub.childSub.length">{{sub.sub_name}}</td>
                                                    <td class="custom-td text-left padding-left-8px">
                                                        {{sub.childSub[0].sub_name}}</td>
                                                    <td class="custom-td">
                                                        {{calculateGradePoint(sub.childSub[0].sub_id,term)}}</td>
                                                    <td *ngIf="obtainedGradeAvgHighest.remark" class="custom-td"></td>
                                                </tr>
                                                <ng-container *ngFor="let sub1 of sub.childSub; let i=index">
                                                    <tr class="custom-tr" *ngIf="sub1.sub_type == 2 && i!=0">
                                                        <td class="custom-td text-left padding-left-8px">
                                                            {{sub1.sub_name}}
                                                        </td>
                                                        <td class="custom-td">{{calculateGradePoint(sub1.sub_id,term)}}
                                                        </td>
                                                        <td *ngIf="obtainedGradeAvgHighest.remark" class="custom-td">
                                                            {{remarkOfSub(sub1.sub_id) | titlecase}}</td>
                                                    </tr>
                                                </ng-container>
                                            </ng-template>
                                        </ng-container>
                                    </tbody>
                                </table>
                            </ng-container>

                        </div>
                    </div>
                </ng-template>
            </ng-container>


            <div class="row" *ngIf="resultdivflag">
                <div class="col-12">
                    <table>
                        <thead>
                            <tr><br></tr>
                            <tr *ngIf="!obtainedGradeAvgHighest.remark && data.ect_exam_type == 1 && remarkOfSub()">
                                <td width="20%" valign="top">Remarks</td>
                                <td width="1%" valign="top">:</td>
                                <td> {{remarkOfSub() | titlecase}}</td>
                            </tr>
                            <tr *ngIf="data.ect_exam_type == 2 && remarkOfSub()">
                                <td width="20%" valign="top">Remarks</td>
                                <td width="1%" valign="top">:</td>
                                <td> {{remarkOfSub() | titlecase}}</td>
                            </tr>
                            <tr *ngIf="isuserachivement == '1' && userachivement?.a_achievement != ''">
                                <td width="20%" valign="top">Achievement</td>
                                <td width="1%" valign="top">:</td>
                                <td> {{userachivement?.a_achievement | titlecase}}</td>
                            </tr>
                            <tr><br></tr>
                            <tr class="margin-top-10" *ngIf="data.ect_exam_type == 2">
                                <td style="text-align: left">Result</td>
                                <td>:</td>
                                <td> {{getPassResult(data?.param?.eme_term_id)}}</td>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <table class="table-100">
                        <tr>
                            <th height="80" style="text-align: left; vertical-align: bottom;">
                                <table>
                                    <thead>
                                        <tr>
                                            <th *ngIf="showdeclarationdate">Date</th>
                                            <th *ngIf="showdeclarationdate">: {{dateofdeclaration | date:'d-MMM-y'}}
                                            </th>
                                        </tr>
                                    </thead>
                                </table>
                            </th>
                            <th style="text-align: center; vertical-align: bottom;" height="80">
                                <table>
                                    <thead>
                                        <tr>
                                            <th *ngIf="useTeacherSignature === '1' && teacherSignature"> <img
                                                    [src]="teacherSignature" height="60px" width="160px"></th>
                                        </tr>
                                        <tr>
                                            <th>Signature of Class Teacher</th>
                                        </tr>
                                    </thead>
                                </table>
                            </th>
                            <th style="text-align: right; vertical-align: bottom;" height="80">
                                <table>
                                    <thead>
                                        <tr>
                                            <th *ngIf="usePrincipalSignature === '1' && principalSignature"> <img
                                                    [src]="principalSignature" height="60px" width="120px"></th>
                                        </tr>
                                        <tr>
                                            <th>Signature of Principal</th>
                                        </tr>
                                    </thead>
                                </table>
                            </th>
                        </tr>
                    </table>
                </div>
            </div>
            <hr>
            <div class="row"
                *ngIf="!(data.param.eme_subexam_id && data.param.eme_subexam_id.length > 0) && obtainedGradeAvgHighest.grade">
                <div class="col-12">
                    <span><b>Grading Scale for scholatic Area</b></span><span> : Grades are awarded on a
                        {{gradingSystem}}
                        scale as
                        follows</span>
                </div>
            </div>
            <div class="row"
                *ngIf="data.ect_exam_type == 2 && !(data.param.eme_subexam_id && data.param.eme_subexam_id.length > 0) && obtainedGradeAvgHighest.grade">
                <div class="col-12">

                    <div style="margin-top: 15px; text-align: center; width: 100%;">
                        <table style="width:100%; border: 1px solid black;border-collapse: collapse;">
                            <tbody>
                                <tr>
                                    <th style="border: 1px solid black;border-collapse: collapse;padding: 5px">Marks
                                        Range </th>
                                    <td *ngFor="let item of GradeSet"
                                        style="border: 1px solid black;border-collapse: collapse;padding: 5px">
                                        {{item.egs_range_start}} - {{item.egs_range_end}}
                                    </td>
                                </tr>
                                <tr>
                                    <th style="border: 1px solid black;border-collapse: collapse;padding: 5px">Grade
                                    </th>
                                    <td *ngFor="let item of GradeSet"
                                        style="border: 1px solid black;border-collapse: collapse;padding: 5px">
                                        {{item?.egs_grade_name | titlecase}}
                                        <span *ngIf="item?.egs_grade_text">( {{item?.egs_grade_text}} )</span>
                                    </td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row"
                *ngIf="data.ect_exam_type == 1 && !(data.param.eme_subexam_id && data.param.eme_subexam_id.length > 0) && obtainedGradeAvgHighest.grade">
                <div class="col-12">

                    <div style="margin-top: 15px; text-align: center; width: 100%;">
                        <table style="width:100%; border: 1px solid black;border-collapse: collapse;">
                            <tbody>
                                <tr>
                                    <th style="border: 1px solid black;border-collapse: collapse;padding: 5px">Grade
                                        Name </th>
                                    <td *ngFor="let item of GradeSetPoint"
                                        style="border: 1px solid black;border-collapse: collapse;padding: 5px">
                                        {{item?.egs_grade_name}} ( {{item?.egs_grade_text}} )
                                    </td>
                                </tr>
                                <!-- <tr>
                                    <th style="border: 1px solid black;border-collapse: collapse;padding: 5px">Grade Text
                                    </th>
                                    <td *ngFor="let item of GradeSetPoint"
                                        style="border: 1px solid black;border-collapse: collapse;padding: 5px">
                                        <span *ngIf="item?.egs_grade_text">( {{item?.egs_grade_text}} )</span>
                                    </td>
                                </tr> -->

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <br>
            <div class="">
                <div [innerHTML]="footer"></div>
                <div style="width: 100%; height:10px; background-color:#f4981e;"></div>
                <div style="width: 100%; height:10px; background-color:#159ec4"></div>

            </div>
        </td>
    </tr>
</table>