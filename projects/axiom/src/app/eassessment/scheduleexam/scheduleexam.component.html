<!-- Breadcrumb-->
<div class="breadcrumb-section">
  <div class="row">
    <div class="bread-col-1 col-lg-1">
      <a [routerLink]="[homeUrl]">
        <i class="breadcrumb-icon fas fa-home"></i>
      </a>
    </div>
    <div class="bread-col-1 col-lg-1">
      <div class="vertical-line"></div>
    </div>
    <div class="col-lg-10 first-breadcrumb-title-col">
      <div class="first-breadcrumb-title">
        <span class="bread-title">E-Assessment</span>
        <span class="bread-divider">-</span>
        <span class="bread-link">Scheduled Exam</span>
      </div>
    </div>
  </div>
</div>
<!-- Breadcrumb ends-->
<div class="add-question-content">
  <div class="row row-remove-top-margin">
    <div class="col-lg-12 col-mobile-view-add-ques">
      <div class="white-box">
        <div class="white-box-content">
          <div class="row">
            <div class="col-lg-12 col-mobile-view-add-ques">
              <div class="white-box-content-title">
                <span>List of Scheduled Exam</span>
              </div>
            </div>
          </div>
          <div class="row row-remove-top-margin">
            <div class="col-lg-12 col-mobile-view-add-ques">
              <div class="top-right-parameter top-middle-parameter">
                <div class="top-right-box top-blue-box">
                  <div class="top-right-box-content top-middle-box-content">
                    <div class="top-right-box-content-title">
                      <div class="row">
                        <div class="col-lg-12 col-mobile-view-add-ques">
                          <span>Select Parameters</span>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-12 col-mobile-view-add-ques">
                          <form [formGroup]="Schedule_exam_Form" novalidate>
                            <div class="row">
                              <div class="col-lg-12">
                                <div class="row">
                                  <div class="col-lg-2 fin-tab-col-25">
                                    <mat-form-field class="form-field">
                                      <mat-select placeholder="Class" formControlName="es_class_id"
                                        (selectionChange)="getSubjectsByClass()" required>
                                        <mat-option *ngFor="let item of classArray" [value]="item.class_id">
                                          {{item.class_name}}
                                        </mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                  </div>
                                  <div class="col-lg-2 fin-tab-col-25">
                                    <mat-form-field class="form-field">
                                      <mat-select placeholder="Subject" formControlName="es_sub_id" required>
                                        <mat-option *ngFor="let item of subjectArray" [value]="item.sub_id">
                                          {{item.sub_name}}
                                        </mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                  </div>
                                  <div class="col-lg-2 fin-tab-col-25">
                                    <mat-form-field class="form-field">
                                      <mat-select placeholder="Exam Type" formControlName="es_exam_type">
                                        <mat-option *ngFor="let item of examTypeArray" [value]="item.exam_type_id">
                                          {{item.exam_type_name}}
                                        </mat-option>
                                      </mat-select>
                                    </mat-form-field>
                                  </div>
                                  <div class="col-lg-2 fin-tab-col-25">
                                    <button class="submit-button mat-raised-button"
                                      (click)="getScheduleExam()">Apply</button>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <br>
          <div *ngIf="tableCollection">
            <div class="col-lg-12 col-mobile-view-add-ques">
              <div class="table-box">
                <div class=" table-box-main">
                  <div class=" table-filter">
                    <mat-form-field>
                      <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
                      <span matPrefix><i class="fas fa-sliders-h table-filter-icon"></i>&nbsp;&nbsp; </span>
                    </mat-form-field>
                  </div>
                  <br>
                  <mat-table class="specific-table list-of-sche table-100" #table [dataSource]="dataSource" matSort>
                    <!-- Position Column -->
                    <ng-container matColumnDef="position">
                      <mat-header-cell *matHeaderCellDef mat-sort-header> No. </mat-header-cell>
                      <mat-cell *matCellDef="let item"> {{item.position}} </mat-cell>
                    </ng-container>
                    <!-- Template Name Column -->
                    <ng-container matColumnDef="name">
                      <mat-header-cell *matHeaderCellDef mat-sort-header col-align>Test Name</mat-header-cell>
                      <mat-cell *matCellDef="let item"> {{item.name}} </mat-cell>
                    </ng-container>
                    <!-- duration Column -->
                    <ng-container matColumnDef="duration">
                      <mat-header-cell *matHeaderCellDef mat-sort-header>Duration </mat-header-cell>
                      <mat-cell *matCellDef="let item"> {{item.duration}} Mins </mat-cell>
                    </ng-container>
                    <!--marks-->
                    <ng-container matColumnDef="marks">
                      <mat-header-cell *matHeaderCellDef mat-sort-header> Marks </mat-header-cell>
                      <mat-cell *matCellDef="let item"> {{item.marks}} </mat-cell>
                    </ng-container>
                    <!-- Location Column -->
                    <ng-container matColumnDef="location">
                      <mat-header-cell *matHeaderCellDef mat-sort-header> Location </mat-header-cell>
                      <mat-cell *matCellDef="let item"> {{item.location}} </mat-cell>
                    </ng-container>
                    <!--date Column -->
                    <ng-container matColumnDef="date">
                      <mat-header-cell *matHeaderCellDef mat-sort-header>Date </mat-header-cell>
                      <mat-cell *matCellDef="let item"> {{item.date | date:'dd-MM-yyyy'}} </mat-cell>
                    </ng-container>
                    <!-- Action Column -->
                    <ng-container matColumnDef="time">
                      <mat-header-cell *matHeaderCellDef mat-sort-header>Start Time</mat-header-cell>
                      <mat-cell *matCellDef="let item"> {{item.time }} </mat-cell>
                    </ng-container>
                    <ng-container matColumnDef="action">
                      <mat-header-cell *matHeaderCellDef> Action </mat-header-cell>
                      <mat-cell *matCellDef="let item">
                        <a *ngIf="isExistUserAccessMenu('60')" [routerLink]="['../exam_setup']"
                          [queryParams]="{es_id:item.action.es_id}">
                          <i class="far fa-clock reschedule-button-icon" matTooltip="Reschedule Test"
                            aria-hidden="true"></i>&nbsp;&nbsp;</a>
                        <a *ngIf="isExistUserAccessMenu('61')" target="_blanck"
                          [routerLink]="['../../questionpaper/teacher_copy',item.action.es_qp_id]">
                          <i class="fas fa-eye view-eye-icon" data-toggle="tooltip" data-placement="top"
                            matTooltip="View Test" aria-hidden="true"></i>&nbsp;&nbsp;
                        </a>
                        <a *ngIf="isExistUserAccessMenu('63') && item.action.es_exam_type != '2'"
                          (click)="startTest(item)">
                          <i class="fas fa-play start-button-icon" data-toggle="tooltip" data-placement="top"
                            matTooltip="Start Test" aria-hidden="true"></i>&nbsp;&nbsp;
                        </a>
                        <a *ngIf="isExistUserAccessMenu('63') && item.action.es_exam_type == '2' && item.action.showEndTest"
                          (click)="endTest(item.action)">
                          <i class="fas fa-hourglass-end" data-toggle="tooltip" data-placement="top"
                            matTooltip="End Test" aria-hidden="true"></i>&nbsp;&nbsp;
                        </a>
                        <a *ngIf="isExistUserAccessMenu(65)">
                          <i class="far fa-trash-alt table-delete-icon" data-toggle="tooltip" data-placement="top"
                            matTooltip="Delete" aria-hidden="true"
                            (click)="openModal({});deleteExam(item.action.es_id)"></i>
                        </a>
                      </mat-cell>;
                    </ng-container>
                    <mat-header-row class="top_header" *matHeaderRowDef="displayedColumns"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
                  </mat-table>
                  <mat-paginator #paginator [pageSize]="10" [pageSizeOptions]="[5,10,20,30]"
                    [showFirstLastButtons]="true"></mat-paginator>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Delete Modal -->
  <app-delete-modal #deleteModalRef [deleteMessage]="'Are you Sure? You want to Delete '"
    (deleteOk)="deleteScheduledExam(currentQues)" (deleteCancel)="deleteComCancel()">
  </app-delete-modal>