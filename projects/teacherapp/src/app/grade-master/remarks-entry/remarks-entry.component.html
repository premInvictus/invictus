<div class="row">
    <div class="col-12">
        <mat-card>
            <form [formGroup]="paramform">
                <div class="row ">
                    <div class="col-4 remove-col-padding-left margin-top-15"> 
                        <span class="font-size-24 ">Remarks Entry</span>
                    </div>
                    <div class="col-8 remove-col-padding-right text-right">
                        <mat-form-field appearance="outline" class="form-field-150"> 
                            <mat-label>Class</mat-label>
                            <mat-select placeholder="Class" formControlName="ere_class_id" (selectionChange)="getSectionsByClass();" required>
                                <mat-option value="">Please select</mat-option>
                                <mat-option *ngFor="let item of classArray" [value]="item.class_id">{{item.class_name}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field appearance="outline" class="margin-left-15 form-field-150">
                            <mat-label>Section</mat-label>
                            <mat-select placeholder="Section" formControlName="ere_sec_id" (selectionChange)="getRollNoUser()" required>
                                <mat-option value="">Please select</mat-option>
                                <mat-option *ngFor="let item of sectionArray" [value]="item.sec_id">{{item.sec_name}}</mat-option> 
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field appearance="outline" class="margin-left-15 form-field-150">
                          <mat-label>Remarks Type</mat-label>
                          <mat-select placeholder="Section" formControlName="ere_remarks_type" (selectionChange)="getRemarksType()" required >
                              <mat-option value="">Please select</mat-option>
                              <mat-option *ngFor="let item of remarksTypeArray" [value]="item.rt_id">{{item.rt_name}}</mat-option>
                          </mat-select>
                      </mat-form-field>
                        <mat-form-field appearance="outline" class="margin-left-15 form-field-150">
                            <mat-label>Subject</mat-label>
                            <mat-select placeholder="Subject" formControlName="ere_sub_id" required>
                                <mat-option value="">Please select</mat-option>
                                <mat-option *ngFor="let item of subjectArray" [value]="item.sub_id">{{item.sub_name}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field appearance="outline" class="margin-left-15 form-field-150">
                            <mat-label>Term</mat-label>
                            <mat-select placeholder="Term" formControlName="ere_term_id" required>
                                <mat-option value="">Please select</mat-option>
                                <mat-option *ngFor="let item of termsArray" [value]="item.term_id">{{item.term_name}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field appearance="outline" class="margin-left-15 form-field-150">
                            <mat-label>Exam</mat-label>
                            <mat-select placeholder="Exam" formControlName="ere_exam_id" required>
                                <mat-option value="">Please select</mat-option>
                                <mat-option *ngFor="let item of examArray" [value]="item.exam_id">{{item.exam_name}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field appearance="outline" class="margin-left-15 form-field-150">
                            <mat-label>Sub-Exam</mat-label>
                            <mat-select placeholder="Sub-Exam" formControlName="ere_sub_exam_id" multiple (selectionChange)="displayData()" required>
                                <mat-option *ngFor="let item of subexamArray" [value]="item.se_id">{{item.sexam_name}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
            </form>
        </mat-card>
    </div>
  </div>
  
  <div class="row" *ngIf="tableDivFlag">
    <div class="col-12">
        <mat-card>
            <table class="custom-table">
                <thead>
                    <tr class="custom-tr">
                        <th rowspan="2" class="custom-th text-center" width="100">Roll No.</th>
                        <th rowspan="2" class="custom-th text-center" width="250">Student name</th>
                        <th rowspan="2" class="custom-th text-center" width="100">Admission</th>
                        <th [attr.colspan]="paramform.value.ere_sub_exam_id.length"  class="custom-th text-center">{{getSubjectName() | titlecase}}</th>
                    </tr>
                    <tr class="custom-tr">
                        <th class="custom-th text-center" [attr.colspan]="paramform.value.ere_sub_exam_id.length" *ngFor="let item of paramform.value.ere_sub_exam_id">{{getSubexamName(item) | titlecase}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let stu of studentArray; let s = index">
                        <td class="custom-td text-center font-size-14">{{stu.r_rollno}}</td>
                        <td class="custom-td text-left font-size-14"><span class="margin-left-15">{{stu.au_full_name | titlecase}}</span> </td>
                        <td class="custom-td text-center font-size-14">{{stu.au_admission_no}}</td>
                        <ng-container *ngFor="let item of paramform.value.ere_sub_exam_id;let i=index">
                        <td class="custom-td text-center font-size-14"   >
                                {{getInputMarks(item, stu.au_login_id)}}</td>
                        <td class="custom-td text-center font-size-14 "  >
                            <ng-template [ngIf]="checkEditable(item, '0')" [ngIfElse]="elseContaint">
                                <mat-form-field class="margin-top-10 form-field-60">
                                    <input matInput type="text" [value]="getInputRemarks(item, stu.au_login_id)" (change)="enterInputMarks(item, stu.au_login_id, $event.target.value)">
                                </mat-form-field>
                            </ng-template>
                            <ng-template #elseContaint>
                                {{getInputRemarks(item, stu.au_login_id)}}
                            </ng-template>
                        </td>
                        </ng-container>
                    </tr>
                </tbody>
            </table>
            <br>
            <div class="row margin-top-25">
                <div class="col-12 text-center" *ngIf="isAnyoneEditable('0')">
                    <button mat-button class="btn-success-green" (click)="saveForm()">Save</button>
                    <button mat-button class="btn-success-green btn-spacer" (click)="saveForm('1')">Save & Submit</button>
                </div>
            </div>
        </mat-card>
    </div>
  </div>