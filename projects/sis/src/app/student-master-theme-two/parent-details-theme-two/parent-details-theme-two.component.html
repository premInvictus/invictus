<div class="padding-15">
   <div class="row">
      <div *ngFor="let item of formArray;let i=index" [class]="checkCssClass(i)">
         <form [formGroup]="formGroupArray[i].formGroup">
            <div class="row">
               <div class="col-12">
                  <div *ngIf="i==2">
                     <span>Whether the child is under the custody of guardian?</span>
                     <mat-slide-toggle class="btn-spacer" [(ngModel)]="showHideGuardianField"
                        (change)="enableDisableGuardian($event)" [disabled]="viewOnly"
                        formControlName="epd_custody_of_guardian">{{guardianStatus}}</mat-slide-toggle>
                  </div>
               </div>
            </div>
            <div *ngIf="showDetailsDiv(i)">
                  <div class="row">
                        <div class="col-12">
                           <mat-radio-group name="'active_parent'+i" [disabled]="viewOnly"
                              (change)="setActiveParent(i,$event)" formControlName="epd_status">
                              <mat-radio-button value="1" >
                                 <span class="text-uppercase"><b>{{item.formHeader}}</b></span>
                              </mat-radio-button>
                           </mat-radio-group>
                        </div>
                     </div>
               <div class="row">
                     <div class="col-4 remove-col-padding">
                           <div class=" student-img ">
                              <div class="student-pic--parent text-center">
                                 <label [for]="'image'+i" class="main-label-img">
                                    <img class="parent-pic--imgone parent-pic__circle sis-parent-pic__size"
                                       [src]="profileImageArray[i]">
                                    <img *ngIf="!viewOnly"
                                       class="parent-pic--imgtwo parent-pictwo__size student-pictwo__color"
                                       src="/assets/images/twitpic-symbol.svg">
                                 </label>
                                 <input type="file" placeholder="Upload image" [id]="'image'+i" class="image-upload-btn"
                                    (change)="bindImageToForm($event, i)" [disabled]="viewOnly">
                              </div>
                           </div>
                        </div>
                  <div class="col-8 tab-custom-col-70 tab-remove-right-padding remove-col-padding">
                     
                     <div class="row remove-top-margin">
                        <div *ngIf="checkIfFieldExist('epd_parent_name')" class="col-6 ">
                           <mat-form-field class="form-field" appearance="outline">
                              <mat-label>Father's Full Name</mat-label>
                              <input matInput placeholder="Father's Full name" [readonly]="viewOnly" minlength="2" maxlength="50"
                                 formControlName="epd_parent_name" [errorStateMatcher]="confirmValidParentMatcher"
                                 required class="text-capitalize" />
                              <mat-error>
                                 Please enter full name
                              </mat-error>
                           </mat-form-field>
                        </div>
                        <div class="col-6 " *ngIf="checkIfFieldExist('epd_contact_no')">
                              <mat-form-field class="form-field" appearance="outline">
                                    <mat-label>Contact No.</mat-label>
                              <input matInput placeholder="Contact No." formControlName="epd_contact_no" minlength="10"
                                 maxlength="10" pattern="[0-9]*" [readonly]="viewOnly"
                                 [errorStateMatcher]="confirmValidParentMatcher">
                              <mat-error>
                                 Please enter contact number
                              </mat-error>
                           </mat-form-field>
                        </div>
                        
                     </div>
                     <div class="row remove-top-margin">
                        <div *ngIf="i==2 && checkIfFieldExist('epd_guard_child_rel')" class="col-12">
                              <mat-form-field class="form-field" appearance="outline">
                                    <mat-label>Relationship with Child</mat-label>
                              <input class="text-capitalize" matInput placeholder="Relationship with child.."
                                 [readonly]="viewOnly" formControlName="epd_guard_child_rel"
                                 [errorStateMatcher]="confirmValidParentMatcher" required />
                              <mat-error>
                                 Please enter relation
                              </mat-error>
                           </mat-form-field>
                        </div>
                     </div>
                     <div class="row remove-top-margin">
                           <div class="col-6 " *ngIf="checkIfFieldExist('epd_whatsapp_no')">
                                 <mat-form-field class="form-field" appearance="outline">
                                       <mat-label>Whatsapp No</mat-label>
                                 <input matInput placeholder="Whatsapp No." formControlName="epd_whatsapp_no"
                                    minlength="10" maxlength="10" pattern="[0-9]*" [readonly]="viewOnly"
                                    [errorStateMatcher]="confirmValidParentMatcher">
                              </mat-form-field>
                           </div>
                           <div class="col-6 " *ngIf="checkIfFieldExist('epd_email')">
                                 <mat-form-field class="form-field" appearance="outline">
                                       <mat-label>Email</mat-label>
                                 <input formControlName="epd_email"
                                    pattern="[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$" type="email" matInput
                                    placeholder="Email" [readonly]="viewOnly">
                                 <mat-error>
                                    Please enter valid email
                                 </mat-error>
                              </mat-form-field>
                           </div>
                        
                     </div>
                     <div class="row remove-top-margin">
                           <div [hidden]="!checkIfFieldExist('epd_parent_dob')" class="col-6">
                                 <mat-form-field class="form-field" appearance="outline">
                                       <mat-label>Date of Birth</mat-label>
                                 <input matInput [matDatepicker]="picker" [max]="maxDate" [readonly]="viewOnly"
                                    placeholder="Date of Birth" formControlName="epd_parent_dob"
                                    (dateChange)="addEvent('change', $event,i)" />
                                 <mat-datepicker-toggle tabindex="-1" matSuffix [for]="picker"></mat-datepicker-toggle>
                                 <mat-datepicker tabindex="-1" [disabled]="viewOnly" #picker></mat-datepicker>
                                 <mat-error>
                                    Please enter date of birth
                                 </mat-error>
                              </mat-form-field>
                           </div>
                           <div class="col-6" *ngIf="checkIfFieldExist('epd_pan_no')">
                                 <mat-form-field class="form-field" appearance="outline">
                                       <mat-label>PAN</mat-label>
                                 <input matInput placeholder="PAN" formControlName="epd_pan_no" [readonly]="viewOnly"
                                    minlength="10" maxlength="10" [errorStateMatcher]="confirmValidParentMatcher">
                                 <mat-error>
                                    Please enter Pan number
                                 </mat-error>
                              </mat-form-field>
                           </div>
                     </div>
                  </div>
                  
               </div>
               <div class="row remove-top-margin">
                  
                  
                  <div class="col-4" *ngIf="checkIfFieldExist('epd_aadhar_no')">
                        <mat-form-field class="form-field" appearance="outline">
                              <mat-label>Aadhaar No.</mat-label>
                        <input matInput placeholder="Aadhaar no." formControlName="epd_aadhar_no"
                           mask="0000 0000 0000 0000" minlength="12" maxlength="14" [readonly]="viewOnly"
                           [errorStateMatcher]="confirmValidParentMatcher">
                        <mat-error>
                           Please enter aadhar number
                        </mat-error>
                     </mat-form-field>
                  </div>
                  <div class="col-8 margin-top-12">
                        <span>Whether Alumni of the School?</span>
                        <mat-slide-toggle class="btn-spacer" (change)="checkAluminiStatus(i,$event)" [disabled]="viewOnly"
                           [ngModel]="aluminiStatus[i] === 'No' ? false: true" formControlName="epd_parent_alumni">
                           {{aluminiStatus[i]}}</mat-slide-toggle>
                     </div>
               </div>
               <div class="row remove-top-margin">
                  <div *ngIf="checkIfFieldExist('epd_parent_nationality')" class="col-6">
                        <mat-form-field class="form-field" appearance="outline">
                              <mat-label>Nationality</mat-label>
                        <mat-select placeholder="Nationality" [disabled]="viewOnly"
                           formControlName="epd_parent_nationality" [errorStateMatcher]="confirmValidParentMatcher"
                           required>
                           <mat-option value="">Please Select</mat-option>
                           <mat-option value="91">Indian</mat-option>
                        </mat-select>
                        <mat-error>
                           Please select Nationality
                        </mat-error>
                     </mat-form-field>
                  </div>
               </div>
               <!-- <div class="row remove-top-margin">
                  <div class="col-12">
                     <span>Whether Alumni of the School?</span>
                     <mat-slide-toggle class="btn-spacer" (change)="checkAluminiStatus(i,$event)" [disabled]="viewOnly"
                        [ngModel]="aluminiStatus[i] === 'No' ? false: true" formControlName="epd_parent_alumni">
                        {{aluminiStatus[i]}}</mat-slide-toggle>
                  </div>
               </div> -->
               <div class="row">
                  <div *ngIf="aluminiStatusArray[i] && checkIfFieldExist('epd_parent_alumni_last_class')" class="col-4">
                        <mat-form-field class="form-field" appearance="outline">
                              <mat-label>Last Class Attended</mat-label>
                        <mat-select placeholder="Last Class Attended" [disabled]="viewOnly"
                           formControlName="epd_parent_alumni_last_class"
                           [errorStateMatcher]="confirmValidParentMatcher" required>
                           <mat-option value="">Please Select</mat-option>
                           <mat-option *ngFor="let item of classArray" [value]="item.class_id">{{item.class_name}}
                           </mat-option>
                        </mat-select>
                        <mat-error>
                           Please select class
                        </mat-error>
                     </mat-form-field>
                  </div>
                  <div *ngIf="aluminiStatusArray[i] && checkIfFieldExist('epd_parent_alumni_last_year')" class="col-4">
                        <mat-form-field class="form-field" appearance="outline">
                              <mat-label>Enter Year</mat-label>
                        <input class="text-capitalize" matInput placeholder="Enter Year" [readonly]="viewOnly"
                           pattern="[0-9]*" minlength="4" maxlength="4" formControlName="epd_parent_alumni_last_year"
                           [errorStateMatcher]="confirmValidParentMatcher" required />
                        <mat-error>
                           Please enter value in year format.
                        </mat-error>
                     </mat-form-field>
                  </div>
                  <div *ngIf="aluminiStatusArray[i] && checkIfFieldExist('epd_parent_admission_no')" class="col-4">
                        <mat-form-field class="form-field" appearance="outline">
                              <mat-label>Enter Admission No.</mat-label>
                        <input class="text-capitalize" matInput placeholder="Enter Admission Number"
                           [readonly]="viewOnly" pattern="[0-9]*" minlength="4" maxlength="4"
                           formControlName="epd_parent_admission_no" [errorStateMatcher]="confirmValidParentMatcher" />
                        <mat-error>
                           Please enter admission number.
                        </mat-error>
                     </mat-form-field>
                  </div>
               </div>
               <div class="row remove-top-margin">
                  <div class="col-12">
                     <span class="text-uppercase"><b>Education Details</b></span>
                  </div>
               </div>
               <br>
               <div class="row remove-top-margin">
                  <div *ngIf="checkIfFieldExist('epd_qualification')" class="col-8">
                        <mat-form-field class="form-field" appearance="outline">
                              <mat-label>Choose Qualification</mat-label>
                        <mat-select placeholder="Choose Qualification.." formControlName="epd_qualification"
                           [disabled]="viewOnly" multiple [errorStateMatcher]="confirmValidParentMatcher">
                           <mat-option *ngFor="let item of qualificationArray" [value]="item.qlf_id">{{item.qlf_name}}
                           </mat-option>
                        </mat-select>
                        <mat-error>
                           Please Choose Qualification
                        </mat-error>
                     </mat-form-field>
                  </div>
               </div>
               <div class="row ">
                  <div class="col-6">
                     <span>Whether Staff of the Organisation ?</span>
                     <mat-slide-toggle class="inline-form-radio-spacing-parent"
                        formControlName="epd_parent_staff_of_organisation" (change)="checkStaffStatus($event,i)"
                        [disabled]="viewOnly" [ngModel]="staffStatus[i] === 'No' ? false: true">{{staffStatus[i]}}
                     </mat-slide-toggle>
                  </div>
                  <div *ngIf="checkIfFieldExist('epd_is_transferable')" class="col-6">
                     <span>Is Job transferable ?</span>
                     <mat-slide-toggle class="btn-spacer" formControlName="epd_is_transferable" [disabled]="viewOnly"
                        [ngModel]="jobStatus[i] === 'No' ? false: true" (change)="checkJobStatus($event, i)">
                        {{jobStatus[i]}}</mat-slide-toggle>
                  </div>
               </div>
               <div class="row margin-top-15">
                     <div class="col-12">
                        <span class="text-uppercase"><b>Occupation Details</b></span>
                     </div>
                  </div>
                  <br>
               <div class="row">
                  <div *ngIf="checkIfFieldExist('epd_parent_occupation_type')" class="col-4 text-center">
                        <mat-form-field class="form-field" appearance="outline">
                              <mat-label>Occupation Type</mat-label>
                        <mat-select placeholder="Occupation Type" [disabled]="viewOnly"
                           formControlName="epd_parent_occupation_type" [errorStateMatcher]="confirmValidParentMatcher">
                           <br>
                           <mat-form-field class="form-field">
                              <input matInput placeholder="Search.." (keyup)="filterOccupation($event.target.value)"
                                 (blur)="refillData()" />
                           </mat-form-field>
                           <mat-option value="">Please Select</mat-option>
                           <mat-option *ngFor="let item of occupationTypeArray" [value]="item.ocpt_id">
                              {{item.ocpt_name}}</mat-option>
                        </mat-select>
                     </mat-form-field>
                  </div>
                  <div *ngIf="checkIfFieldExist('epd_organisation')" class="col-4">
                        <mat-form-field class="form-field" appearance="outline">
                              <mat-label>Organisation Name</mat-label>
                        <input class="text-capitalize" matInput placeholder="Organisation Name.." [readonly]="viewOnly"
                           formControlName="epd_organisation" [errorStateMatcher]="confirmValidParentMatcher" />
                     </mat-form-field>
                  </div>
                  
                  <div class="col-4" *ngIf="checkIfFieldExist('epd_designation')">
                        <mat-form-field class="form-field" appearance="outline">
                              <mat-label>Designation</mat-label>
                        <input class="text-capitalize" matInput placeholder="Designation" [readonly]="viewOnly"
                           formControlName="epd_designation" [errorStateMatcher]="confirmValidParentMatcher" />
                     </mat-form-field>
                  </div>
               </div>
               <form [formGroup]="formGroupArray[i].ea_office_address">
               <div class="row">
                  <div *ngIf="checkIfFieldExist('epd_income')" class="col-4">
                        <mat-form-field class="form-field" appearance="outline">
                              <mat-label>Annual Income</mat-label>
                        <mat-select placeholder="Annual Income" [disabled]="viewOnly" formControlName="epd_income"
                           [errorStateMatcher]="confirmValidParentMatcher">
                           <mat-option>Please Select</mat-option>
                           <mat-option *ngFor="let item of annualIncomeArray" [value]="item.ai_id">{{item.ai_from_to}}
                           </mat-option>
                        </mat-select>
                     </mat-form-field>
                  </div>
                  <div class="col-8" *ngIf="checkIfFieldExist('ea_address1')">
                        <mat-form-field class="form-field" appearance="outline">
                              <mat-label>Office Address</mat-label>
                        <input class="text-capitalize" matInput placeholder="Office Address" [readonly]="viewOnly"
                           minlength="3" formControlName="ea_address1" />
                     </mat-form-field>
                  </div>

               </div>
               <!-- <form [formGroup]="formGroupArray[i].ea_office_address"> -->
                  <!-- <div *ngIf="checkIfFieldExist('ea_address1')" class="row">
                     <div class="col-12">
                           <mat-form-field class="form-field" appearance="outline">
                                 <mat-label>Office Address</mat-label>
                           <input class="text-capitalize" matInput placeholder="Office Address" [readonly]="viewOnly"
                              minlength="3" formControlName="ea_address1" />
                        </mat-form-field>
                     </div>
                  </div> -->
                  <div *ngIf="checkIfFieldExist('ea_address2')" class="row">
                     <div class="col-12">
                           <mat-form-field class="form-field" appearance="outline">
                                 <mat-label>Address Line 2</mat-label>
                           <input class="text-capitalize" matInput placeholder="Address Line 2" [readonly]="viewOnly"
                              formControlName="ea_address2" />
                        </mat-form-field>
                     </div>
                  </div>
                  <div class="row">
                     <div *ngIf="checkIfFieldExist('ea_city')" class="col-4">
                           <mat-form-field class="form-field" appearance="outline">
                                 <mat-label>City</mat-label>
                           <input type="text" matInput placeholder="City" formControlName="ea_city" required
                              [readonly]="viewOnly" [errorStateMatcher]="confirmValidParentMatcher"
                              [matAutocomplete]="autoGroup" (keyup)="filterCityStateCountry($event)">
                           <mat-autocomplete #autoGroup="matAutocomplete">
                              <mat-option (click)="getCityPerId(item, i)" *ngFor="let item of cityCountryArray"
                                 [value]="item.cit_id">{{item.cit_name}} -
                                 {{item.sta_name}} - {{item.cou_name}}</mat-option>
                           </mat-autocomplete>
                           <mat-error>
                              This field is required
                           </mat-error>
                        </mat-form-field>
                     </div>
                     <div *ngIf="checkIfFieldExist('ea_state')" class="col-4">
                           <mat-form-field class="form-field" appearance="outline">
                                 <mat-label>State</mat-label>
                           <mat-select placeholder="State" disabled="true" formControlName="ea_state">
                              <mat-option value="">Please Select</mat-option>
                              <mat-option *ngFor="let item of stateArray" [value]="item.sta_id">{{item.sta_name}}
                              </mat-option>
                           </mat-select>
                        </mat-form-field>
                     </div>
                     <div *ngIf="checkIfFieldExist('ea_country')" class="col-4">
                           <mat-form-field class="form-field" appearance="outline">
                                 <mat-label>Country</mat-label>
                           <mat-select placeholder="Country" disabled="true" formControlName="ea_country">
                              <mat-option value="">Please Select</mat-option>
                              <mat-option *ngFor="let item of countryArray" [value]="item.cou_id">{{item.cou_name}}
                              </mat-option>
                           </mat-select>
                           <mat-error>
                              Please select country
                           </mat-error>
                        </mat-form-field>
                     </div>
                  </div>
                  <div class="row">
                     <div *ngIf="checkIfFieldExist('ea_pincode')" class="col-4">
                           <mat-form-field class="form-field" appearance="outline">
                                 <mat-label>PIN</mat-label>
                           <input class="text-capitalize" mask="000 000" matInput placeholder="PIN"
                              [readonly]="viewOnly" minlength="6" maxlength="7" formControlName="ea_pincode"
                              pattern="[0-9]*">
                        </mat-form-field>
                     </div>
                  </div>
               </form>
               <br>
               <form [formGroup]="formGroupArray[i].ea_res_address">
                  <div *ngIf="checkIfFieldExist('ea_same_residential_address')" class="row">
                     <div class="col-12">
                        <span>Whether the residential address is different from the one
                           mentioned above?</span>
                        <mat-slide-toggle class="btn-spacer" formControlName="ea_same_residential_address"
                           (change)="checkAddressStatus(i,$event)" [disabled]="viewOnly"
                           [ngModel]="addressStatus[i] === 'No' ? false: true">{{addressStatus[i]}}</mat-slide-toggle>
                     </div>
                  </div>
                  <div *ngIf="addressStatusArray[i]">
                     <div *ngIf="checkIfFieldExist('ea_address1') && checkIfFieldExist('ea_same_residential_address')"
                        class="row">
                        <div class="col-12">
                              <mat-form-field class="form-field" appearance="outline">
                                    <mat-label>Address Line 1</mat-label>
                              <input class="text-capitalize" matInput placeholder="Address Line 1" [readonly]="viewOnly"
                                 formControlName="ea_address1" [errorStateMatcher]="confirmValidParentMatcher" />
                           </mat-form-field>
                        </div>
                     </div>
                     <div *ngIf="checkIfFieldExist('ea_address2') && checkIfFieldExist('ea_same_residential_address')"
                        class="row">
                        <div class="col-12">
                              <mat-form-field class="form-field" appearance="outline">
                                    <mat-label>Address Line 2.</mat-label>
                              <input class="text-capitalize" matInput placeholder="Address Line 2" [readonly]="viewOnly"
                                 formControlName="ea_address2" [errorStateMatcher]="confirmValidParentMatcher" />
                           </mat-form-field>
                        </div>
                     </div>
                     <div class="row">
                        <div *ngIf="checkIfFieldExist('ea_city') && checkIfFieldExist('ea_same_residential_address')"
                           class="col-4">
                           <mat-form-field class="form-field" appearance="outline">
                                 <mat-label>City</mat-label>
                              <input type="text" matInput placeholder="City" formControlName="ea_city" required
                                 [readonly]="viewOnly || raddressviewonly"
                                 [errorStateMatcher]="confirmValidParentMatcher" [matAutocomplete]="autoGroup"
                                 (keyup)="filterCityStateCountry($event)">
                              <mat-autocomplete #autoGroup="matAutocomplete">
                                 <mat-option (click)="getCityResId(item, i)" *ngFor="let item of cityCountryArray"
                                    [value]="item.cit_id">{{item.cit_name}} -
                                    {{item.sta_name}} - {{item.cou_name}}</mat-option>
                              </mat-autocomplete>
                              <mat-error>
                                 This field is required
                              </mat-error>
                           </mat-form-field>
                        </div>
                        <div *ngIf="checkIfFieldExist('ea_state') && checkIfFieldExist('ea_same_residential_address')"
                           class="col-4">
                           <mat-form-field class="form-field" appearance="outline">
                                 <mat-label>State</mat-label>
                              <mat-select placeholder="State" disabled="true"
                                 [errorStateMatcher]="confirmValidParentMatcher" formControlName="ea_state">
                                 <mat-option value="">Please Select</mat-option>
                                 <mat-option *ngFor="let item of stateArray" [value]="item.sta_id">{{item.sta_name}}
                                 </mat-option>
                              </mat-select>
                           </mat-form-field>
                        </div>
                        <div *ngIf="checkIfFieldExist('ea_country') && checkIfFieldExist('ea_same_residential_address')"
                           class="col-4">
                           <mat-form-field class="form-field" appearance="outline">
                                 <mat-label>Country</mat-label>
                              <mat-select placeholder="Country" disabled="true"
                                 [errorStateMatcher]="confirmValidParentMatcher" formControlName="ea_country">
                                 <mat-option value="">Please Select</mat-option>
                                 <mat-option *ngFor="let item of countryArray" [value]="item.cou_id">{{item.cou_name}}
                                 </mat-option>
                              </mat-select>
                           </mat-form-field>
                        </div>
                     </div>
                     <div class="row">
                        <div *ngIf="checkIfFieldExist('ea_pincode') && checkIfFieldExist('ea_same_residential_address')"
                           class="col-4">
                           <mat-form-field class="form-field" appearance="outline">
                                 <mat-label>PIN</mat-label>
                              <input class="text-capitalize" mask="000 000" matInput placeholder="PIN"
                                 [readonly]="viewOnly" minlength="6" maxlength="7" pattern="[0-9]*"
                                 [errorStateMatcher]="confirmValidParentMatcher" formControlName="ea_pincode" />
                           </mat-form-field>
                        </div>
                     </div>
                  </div>
               </form>
               <br>
            </div>
         </form>

      </div>

      <!-- <div class="vertical-line col-custom-1" *ngIf="showDeclarationDiv"></div> -->
      <div class="col-6 col-custom-49" *ngIf="showDeclarationDiv">
         <h6 class="text-uppercase text-center"><b>Declaration By Guardian</b></h6>
      </div>

      <!-- <div class="vertical-line"></div> -->
   </div>
</div>
<app-imagecrop #cropModal (cropYes)="acceptCrop($event)" (cropNo)="acceptNo($event)"></app-imagecrop>