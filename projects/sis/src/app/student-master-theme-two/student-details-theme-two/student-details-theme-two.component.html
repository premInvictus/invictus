<form [formGroup]="studentdetailsform" autocomplete="off" novalidate>
  <div class="functional-button-one">
    <button mat-fab (click)="openConfig()" *ngIf="isExistUserAccessMenu('config')">
      <mat-icon class="btn-top-icon">build</mat-icon><span class="right-btn-text"> Settings</span>
    </button>
  </div>
  <div class="functional-button-two">
    <button mat-fab *ngIf="addOnly && isExistUserAccessMenu('add')" (click)="addNew()">
      <mat-icon class="btn-top-icon">person_add</mat-icon><span class="right-btn-text">Add Student</span>
    </button>
  </div>
  <div class="functional-button-three">
    <button mat-fab *ngIf="editOnly && isExistUserAccessMenu('edit') && studentdetails?.editable_status == '1'"
      (click)="editForm()"><i class="fas fa-user-edit float-btn-right"></i><span class="right-btn-text">Edit
        Student</span></button>
  </div>
  <div class="functional-button-four">
    <button mat-fab *ngIf="deleteOnly && isExistUserAccessMenu('delete') && studentdetails?.editable_status == '1'"
      (click)="openDeleteDialog()">
      <mat-icon class="btn-top-icon">delete</mat-icon><span class="right-btn-text">Delete Student</span>
    </button>
  </div>
  <div class="row">
    <div class="col-12 remove-col-padding">
      <div class="container-box__white">
        <div class="row">
          <div class="col-12 col-sm-12 col-md-4 col-lg-1 col-xl-1 text-center">
            <label for="image" class="main-label-img margin-top-10">
              <img class="student-pic--imgone student-pic__circle sis-student-pic__size" [src]="defaultsrc">
              <img *ngIf="!viewOnly" class="sis-student-pic--imgtwo sis-student-pictwo__size student-pictwo__color"
                src="/assets/images/twitpic-symbol.svg">
            </label>
            <input type="file" placeholder="Upload image" id="image" class="image-upload-btn"
              (change)="bindImageToForm($event)" [disabled]="viewOnly">
            <div>
              <div
                [ngClass]="studentdetails?.prevStep?.process_name ? 'registration-container__box':'registration-container__box'"
                *ngIf="divFlag && studentdetails?.prevStep?.process_name && studentdetails?.prevStep?.process_no">
                <span class="regno-title font-size-14 font-white"
                  *ngIf="studentdetails?.prevStep?.process_name">{{studentdetails.prevStep.process_name}}:
                  {{studentdetails.prevStep.process_no}}</span>
              </div>
            </div>
          </div>
          <div class="col-12  col-sm-12 col-md-8 col-lg-2 col-xl-2 remove-col-padding">
            <div class="row remove-margin">
              <div class="col-12 text-center margin-top-20">
                <span class="font-size-16 font-medium">{{(belongToForm | capitalize) + ' No.'}}</span>
              </div>
            </div>
            <div class="row remove-top-margin">

              <div class="col-4 remove-col-padding text-center">
                <button mat-mini-fab class="sis-nav-btn btn-neutral margin-top-10" [disabled]="firstB"
                  (click)="firstId(navigation_record.first_record)">
                  <mat-icon class="material-icons" title="First">first_page</mat-icon>
                </button>
                <button mat-mini-fab class="btn-neutral sis-nav-btn margin-left-5" [disabled]="previousB"
                  (click)="previousId(navigation_record.prev_record)">
                  <mat-icon class="material-icons" title="Previous">chevron_left</mat-icon>
                </button>
              </div>
              <div class="col-4 text-center remove-col-padding">
                <mat-form-field class="form-field text-center">
                  <input class="text-center enroll-font-30 font-size-30" formControlName="au_enrollment_id" matInput
                    [readonly]="!viewOnly" (keydown.enter)="loadOnEnrollmentId($event)">
                </mat-form-field>
              </div>
              <div class="col-4  remove-col-padding text-center">
                <button mat-mini-fab class="sis-nav-btn btn-neutral margin-top-10" [disabled]="nextB"
                  (click)="nextId(navigation_record.next_record)">
                  <mat-icon class="material-icons" title="Next">chevron_right</mat-icon>
                </button>
                <button mat-mini-fab class="btn-neutral margin-left-5 sis-nav-btn" [disabled]="lastB"
                  (click)="lastId(navigation_record.last_record)">
                  <mat-icon class="material-icons" title="Last">last_page</mat-icon>
                </button>
              </div>
            </div>
          </div>


          <div class="col-12 col-sm-12 col-lg-9 col-md-12 col-xs-9">
            <div class="row remove-top-margin">
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12 ">
                <div class="liveadm-container__box">
                  <span class="livadm-text font-size-14">{{getLiveLabel()}} : {{studentdetails.livecount}}</span>
                </div>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>Full Name</mat-label>
                  <input class="text-capitalize" formControlName="au_full_name" matInput placeholder="Full Name"
                    required [readonly]="viewOnly">
                </mat-form-field>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12" *ngIf="fieldEnableAtAdmission()">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>{{classPlaceHolder}}</mat-label>
                  <mat-select formControlName="au_class_id" [placeholder]="classPlaceHolder" required
                    [disabled]="viewOnly">
                    <mat-option value="">Please Select</mat-option>
                    <mat-option *ngFor="let item of classArray" [value]="item.class_id">
                      {{item.class_name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12" *ngIf="!fieldEnableAtAdmission()">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>Class Applied Forr</mat-label>
                  <mat-select formControlName="au_class_id" placeholder="Class Applied For" required
                    [disabled]="viewOnly">
                    <mat-option value="">Please Select</mat-option>
                    <mat-option *ngFor="let item of classArray" [value]="item.class_id">
                      {{item.class_name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12" *ngIf="fieldEnableAtAdmission()">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>Section</mat-label>
                  <mat-select formControlName="au_sec_id" placeholder="Section" [disabled]="viewOnly">
                    <mat-option value="">Please Select</mat-option>
                    <mat-option *ngFor="let item of sectionArray" [value]="item.sec_id">
                      {{item.sec_name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12" *ngIf="fieldEnableAtAdmission()">
                <mat-form-field class="form-field" appearance="outline">
                  <mat-label>House Name</mat-label>
                  <mat-select formControlName="au_hou_id" placeholder="House Name" [disabled]="viewOnly">
                    <mat-option value="">Please Select</mat-option>
                    <mat-option *ngFor="let item of houseArray" [value]="item.hou_id">
                      {{item.hou_house_name}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12" *ngIf="studentdetailsform.value.epd_parent_name">
                <div [ngClass]="studentdetailsform.value.epd_parent_name? 'remove-col-padding' : 'remove-col-padding '">
                  <mat-form-field appearance="outline" class="form-field"
                    *ngIf="studentdetailsform.value.epd_parent_name">
                    <mat-label>{{parent_type_fun(studentdetails.parentinfo[0].epd_parent_type)}}</mat-label>
                    <input class="text-capitalize" matInput formControlName="epd_parent_name"
                      [placeholder]="parent_type_fun(studentdetails.parentinfo[0].epd_parent_type)" readonly>
                  </mat-form-field>
                </div>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12" *ngIf="studentdetailsform.value.epd_contact_no">
                <div [ngClass]="studentdetailsform.value.epd_contact_no? 'remove-col-padding' : 'remove-col-padding '">
                  <mat-form-field appearance="outline" *ngIf="studentdetailsform.value.epd_contact_no"
                    class="form-field">
                    <mat-label>Contact No.</mat-label>
                    <input class="margin-left-10" formControlName="epd_contact_no" matInput readonly>
                    <i class="fas fa-phone call-field-icon" matPrefix></i>
                  </mat-form-field>
                </div>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12" *ngIf="studentdetailsform.value.epd_whatsapp_no">
                <div [ngClass]="studentdetailsform.value.epd_whatsapp_no? 'remove-col-padding' : 'remove-col-padding '">
                  <mat-form-field appearance="outline" *ngIf="studentdetailsform.value.epd_whatsapp_no"
                    class="form-field">
                    <mat-label>WhatsApp No.</mat-label>
                    <input class="margin-left-10" formControlName="epd_whatsapp_no" matInput readonly>
                    <i class="fab fa-whatsapp whatsapp-field-icon" matPrefix></i>
                  </mat-form-field>
                </div>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12"
                *ngIf="studentdetailsform.value.mi_emergency_contact_name">
                <div
                  [ngClass]="studentdetailsform.value.mi_emergency_contact_name? 'remove-col-padding' : 'remove-col-padding '">
                  <mat-form-field appearance="outline" class="form-field"
                    *ngIf="studentdetailsform.value.mi_emergency_contact_name">
                    <mat-label>Emergency Contact Name</mat-label>
                    <input class="text-capitalize" formControlName="mi_emergency_contact_name" matInput
                      placeholder="Emergency Contact Name" readonly>
                  </mat-form-field>
                </div>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12">
                <div
                  [ngClass]="studentdetailsform.value.mi_emergency_contact_no? 'remove-col-padding' : 'remove-col-padding '">
                  <mat-form-field appearance="outline" *ngIf="studentdetailsform.value.mi_emergency_contact_no"
                    class="form-field">
                    <mat-label>Emergency Contact No</mat-label>
                    <input formControlName="mi_emergency_contact_no" matInput placeholder="Emergency Contact No."
                      readonly>
                  </mat-form-field>
                </div>
              </div>
            </div>
            <div class="row remove-top-margin">
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12 mb-10"
                *ngIf="processtypeService.getProcesstype() !== '5' && stopFlag">
                <div class="grey-container__box text-center">
                  <span><b>Route :</b> {{studentdetails.ead_bus_route ? studentdetails.ead_bus_route : '-'}}</span>
                </div>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12 mb-10"
                *ngIf="processtypeService.getProcesstype() !== '5' && stopFlag">
                <div class="grey-container__box text-center">
                  <span><b>Stop :</b>
                    {{studentdetails.ead_pickup_point ? studentdetails.ead_pickup_point: '-'}}</span>
                </div>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12 mb-10"
                *ngIf="processtypeService.getProcesstype() !== '5'">
                <div class="grey-container__box text-center">
                  <span><b>Fees O/S :</b> {{studentdetails.fee_outstanding ? 
                  (studentdetails.fee_outstanding | number): '0'}}</span>
                </div>
              </div>
              <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6 col-12 mb-10"
                *ngIf="processtypeService.getProcesstype() !== '5'">
                <div class="grey-container__box text-center">
                  <span><b>Concession:</b>{{studentdetails.ead_concession_category ? (studentdetails.ead_concession_category | capitalize) : '-'}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
<app-imagecrop #cropModal (cropYes)="acceptCrop($event)" (cropNo)="acceptNo($event)"></app-imagecrop>
<app-delete-modal #deleteModal [deleteMessage]="deleteMessage" (deleteOk)="deleteUser()"
  (deleteCancel)="deleteCancel()"></app-delete-modal>