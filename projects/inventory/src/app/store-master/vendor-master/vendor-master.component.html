<div class="assession-master-container" *ngIf="!vendorDetailFlag">
  <div class="row">
    <div class="col-12">
      <mat-card>
        <div class="row">
          <div class="col-6 margin-top-15">
            <span class="font-size-24">Vendor Master</span>
          </div>
          <div class="col-5">
          </div>
          <div class="col-1">
            <button class="btn-success-blue mat-raised-button" (click)="openAddVendorDialog()">
              Add Vendor
            </button>
          </div>
        </div>
      </mat-card>
    </div>
  </div>
</div>

<div class="assession-master-container" *ngIf="vendorDetailFlag">
  <div class="row">
    <div class="col-12">
      <mat-card>
        <div class="row">
          <div class="col-6 margin-top-15">
            <span class="font-size-24">Vendor Details</span>
          </div>
          <div class="col-5">
          </div>
          <div class="col-1">
            <button class="btn-danger mat-raised-button" (click)="backToVendorList()">
              Back
            </button>
          </div>
        </div>
      </mat-card>
    </div>
  </div>
</div>
<div class="row  margin-top-15" id="vendor-detail">
  <div class="col-12">
    <mat-card class="mat-card-108" *ngIf="vendorDetailFlag">

      <div class="row">
        <div class="col-3 remove-col-padding-left">
          <div class="row">
            <div class="col-4 remove-col-padding">
              <span class="font-size-16 font-bold">Vendor ID</span>
              <span class="font-size-16 font-bold float-right">:</span>
            </div>
            <div class="col-8 remove-col-padding-right">
              <span class="font-size-16 font-bold opacity-7">
                <span *ngIf="currentVendorDetail?.ven_id"> {{currentVendorDetail?.ven_id}}</span>
                <span *ngIf="!(currentVendorDetail?.ven_id)"> - </span>
              </span>
            </div>
          </div>
        </div>
        <div class="col-3 remove-col-padding-left">
          <div class="row">
            <div class="col-4 remove-col-padding">
              <span class="font-size-16 font-bold">Contact No.</span>
              <span class="font-size-16 font-bold float-right">:</span>
            </div>
            <div class="col-8 remove-col-padding-right">
              <span class="font-size-16 font-bold opacity-7">
                <span *ngIf="currentVendorDetail?.ven_contact"> {{currentVendorDetail?.ven_contact}}</span>
                <span *ngIf="!(currentVendorDetail?.ven_contact)"> - </span>
              </span>
            </div>
          </div>
        </div>
        <div class="col-3 remove-col-padding-left">
          <div class="row">
            <div class="col-4 remove-col-padding">
              <span class="font-size-16 font-bold">PAN No.</span>
              <span class="font-size-16 font-bold float-right">:</span>
            </div>
            <div class="col-8 remove-col-padding-right">
              <span class="font-size-16 font-bold opacity-7">

                <span *ngIf="currentVendorDetail?.ven_pan_no">{{currentVendorDetail?.ven_pan_no}}</span>
                <span *ngIf="!(currentVendorDetail?.ven_pan_no)"> - </span>
              </span>
            </div>
          </div>
        </div>
        <div class="col-3 remove-col-padding-left">
          <div class="row">
            <div class="col-8 remove-col-padding">
              <span class="font-size-16 font-bold">Authorised Contact Person</span>
              <span class="font-size-16 font-bold float-right">:</span>
            </div>
            <div class="col-4 remove-col-padding-right">
              <span class="font-size-16 font-bold opacity-7">
                <span
                  *ngIf="currentVendorDetail?.ven_authorised_person_detail_name">{{currentVendorDetail?.ven_authorised_person_detail_name}}</span>
                <span *ngIf="!(currentVendorDetail?.ven_authorised_person_detail_name)"> - </span>
              </span>
            </div>
          </div>
        </div>
      </div>


      <div class="row">
        <div class="col-3 remove-col-padding-left">
          <div class="row">
            <div class="col-4 remove-col-padding">
              <span class="font-size-16 font-bold">Vendor Name</span>
              <span class="font-size-16 font-bold float-right">:</span>
            </div>
            <div class="col-8 remove-col-padding-right">
              <span class="font-size-16 font-bold opacity-7">
                <span *ngIf="currentVendorDetail?.ven_name">{{currentVendorDetail?.ven_name}}</span>
                <span *ngIf="!(currentVendorDetail?.ven_name)"> - </span>
              </span>
            </div>
          </div>
        </div>
        <div class="col-3 remove-col-padding-left">
          <div class="row">
            <div class="col-4 remove-col-padding">
              <span class="font-size-16 font-bold">Email ID</span>
              <span class="font-size-16 font-bold float-right">:</span>
            </div>
            <div class="col-8 remove-col-padding-right">
              <span class="font-size-16 font-bold opacity-7">
                <span *ngIf="currentVendorDetail?.ven_email">{{currentVendorDetail?.ven_email}}</span>
                <span *ngIf="!(currentVendorDetail?.ven_email)"> - </span>
              </span>
            </div>
          </div>
        </div>
        <div class="col-3 remove-col-padding-left">
          <div class="row">
            <div class="col-4 remove-col-padding">
              <span class="font-size-16 font-bold">GST No.</span>
              <span class="font-size-16 font-bold float-right">:</span>
            </div>
            <div class="col-8 remove-col-padding-right">
              <span class="font-size-16 font-bold opacity-7">
                <span *ngIf="currentVendorDetail?.ven_gst_no">{{currentVendorDetail?.ven_gst_no}}</span>
                <span *ngIf="!(currentVendorDetail?.ven_gst_no)"> - </span>
              </span>
            </div>
          </div>
        </div>
        <div class="col-3 remove-col-padding-left">
          <div class="row">
            <div class="col-8 remove-col-padding">
              <span class="font-size-16 font-bold">Contact No.</span>
              <span class="font-size-16 font-bold float-right">:</span>
            </div>
            <div class="col-4 remove-col-padding-right">
              <span class="font-size-16 font-bold opacity-7">
                <span
                  *ngIf="currentVendorDetail?.ven_authorised_person_detail_contact">{{currentVendorDetail?.ven_authorised_person_detail_contact}}</span>
                <span *ngIf="!(currentVendorDetail?.ven_authorised_person_detail_contact)"> - </span>
              </span>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12 remove-col-padding-left">
          <div class="row">
            <div class="col-1 remove-col-padding">
              <span class="font-size-16 font-bold">Address</span>
              <span class="font-size-16 font-bold float-right">:</span>
            </div>
            <div class="col-11 remove-col-padding-right">
              <span class="font-size-16 font-bold opacity-7">
                <span *ngIf="currentVendorDetail?.ven_address">{{currentVendorDetail?.ven_address}}</span>
                <span *ngIf="!(currentVendorDetail?.ven_address)"> - </span>
              </span>
            </div>
          </div>
        </div>
      </div>
    </mat-card>
  </div>
</div>

<div *ngIf="!vendorDetailFlag">
  <div class="row" [hidden]="!(VENDOR_LIST_ELEMENT.length > 0)">
    <div class="col-12">
      <mat-card class="card-height-730">
        <div class="row">
          <div class="col-6">
            <span class="font-bold font-size-20">Vendors List</span>
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <div class="row ">
              <div class="col-10 remove-col-padding">
                <mat-form-field appearance="legacy lib-form">
                  <input matInput placeholder="Search" (keyup)="applyFilterVendor($event.target.value)" />
                  <mat-icon matPrefix>filter_list</mat-icon>
                </mat-form-field>
              </div>
            </div>
            <table mat-table [dataSource]="vendorlistdataSource" matSort class="table-100 text-center"
              id="report_table">
              <ng-container matColumnDef="srno">
                <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-nowrap" width="5%"> Sr. No. </th>
                <td mat-cell *matCellDef="let element"> {{element.srno}} </td>
              </ng-container>
              <ng-container matColumnDef="ven_id">
                <th mat-header-cell *matHeaderCellDef mat-sort-header width="5%">Vendor ID</th>
                <td mat-cell *matCellDef="let element">
                  <a class="font-skyblue cursor-pointer" (click)="showVendorDetail(element)">{{element?.ven_id}} </a>
                </td>
              </ng-container>
              <ng-container matColumnDef="ven_name">
                <th mat-header-cell *matHeaderCellDef mat-sort-header width="20%">Vendor Name</th>
                <td mat-cell *matCellDef="let element" class="text-left">
                  {{element?.ven_name}}
                </td>
              </ng-container>
              <ng-container matColumnDef="ven_category">
                <th mat-header-cell *matHeaderCellDef mat-sort-header width="8%">Vendor Category</th>
                <td mat-cell *matCellDef="let element">
                  {{element?.ven_category}}
                </td>
              </ng-container>
              <ng-container matColumnDef="ven_address">
                <th mat-header-cell *matHeaderCellDef mat-sort-header width="22%">Address</th>
                <td mat-cell *matCellDef="let element" class="text-left">
                  {{element?.ven_address}}
                </td>
              </ng-container>
              <ng-container matColumnDef="ven_contact">
                <th mat-header-cell *matHeaderCellDef mat-sort-header width="8%">Contact No.</th>
                <td mat-cell *matCellDef="let element">
                  {{element?.ven_contact}}
                </td>
              </ng-container>
              <ng-container matColumnDef="ven_email">
                <th mat-header-cell *matHeaderCellDef mat-sort-header width="12%">Email</th>
                <td mat-cell *matCellDef="let element" class="text-left">
                  {{element?.ven_email }}
                </td>
              </ng-container>

              <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef mat-sort-header width="8%"> Action</th>
                <td mat-cell *matCellDef="let element">
                  <span><i class="fas fa-edit font-color-grey margin-right-15"
                      (click)="editVendor(element, true)"></i></span>
                  <span class="ver-line-divider"><i class="fas fa-trash font-color-red margin-left-15"
                      (click)="openModal({});deleteVendorModel(element)"></i></span>
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedVendorListColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedVendorListColumns;">
              </tr>
            </table>

            <table class="table table-borderd table-stripped custom-table text-center" style="margin-top:5px;">
              <tr *ngIf="VENDOR_LIST_ELEMENT.length == 0">
                <td colspan="9">No Record Found</td>
              </tr>
            </table>
            <mat-paginator #paginator [pageSize]="100" [pageSizeOptions]="[100,300,500,1000]" showFirstLastButtons>
            </mat-paginator>
          </div>
        </div>
      </mat-card>
    </div>
  </div>

  <div class="row" *ngIf="VENDOR_LIST_ELEMENT.length == 0">
    <div class="col-12">
      <mat-card>
        <div class="text-center">
          <app-no-data
            [imgsrc]="'https://s3.ap-south-1.amazonaws.com/files.invictusdigisoft.com/images/isometric/no_vendor_list.png'"
            [noDataText]="" [subText]="'No Vendor Found'"></app-no-data>
        </div>
      </mat-card>
    </div>
  </div>
</div>



<!-- Vendor Detail Grid-->
<div *ngIf="vendorDetailFlag">
  <div class="row" [hidden]="!(VENDOR_LOG_LIST_ELEMENT.length > 0)">
    <div class="col-12">
      <mat-card class="card-height-730">
        <div class="row">
          <div class="col-6">
            <span class="font-bold font-size-20">Vendors Log</span>
          </div>
        </div>
        <div class="row">
          <div class="col-2"></div>
          <div class="col-8">
            <div class="row ">
              <div class="col-10 remove-col-padding">
                <mat-form-field appearance="legacy lib-form">
                  <input matInput placeholder="Search" (keyup)="applyFilterVendorLog($event.target.value)" />
                  <mat-icon matPrefix>filter_list</mat-icon>
                </mat-form-field>
              </div>
            </div>
            <table mat-table [dataSource]="vendorLogListDataSource" matSort class="table-100 text-center"
              id="report_table">

              <ng-container matColumnDef="srno">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Sr No.</th>
                <td mat-cell *matCellDef="let element">
                  {{element?.srno}}
                </td>
              </ng-container>
              <ng-container matColumnDef="invoice_no">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Invoice No.</th>
                <td mat-cell *matCellDef="let element">
                  {{element?.invoice_no}}
                </td>
              </ng-container>
              <ng-container matColumnDef="receipt_no">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Receipt No.</th>
                <td mat-cell *matCellDef="let element">
                  <a class="font-skyblue cursor-pointer" (click)="openReceiptModal(element.receipt_no)"> {{element?.receipt_no}}
                  </a>

                </td>
              </ng-container>
              <ng-container matColumnDef="receipt_date">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Receipt Date</th>
                <td mat-cell *matCellDef="let element">
                  {{element?.receipt_date | date:'d-MMM-y'}}
                </td>
              </ng-container>

              <ng-container matColumnDef="generated_by">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Generated By</th>
                <td mat-cell *matCellDef="let element">
                  {{element?.generated_by}}
                </td>
              </ng-container>

              <ng-container matColumnDef="quantity">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Quantity</th>
                <td mat-cell *matCellDef="let element">
                  {{element?.quantity }} {{element?.item_units}}
                </td>
              </ng-container>


              <tr mat-header-row *matHeaderRowDef="displayedVendorLogListColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedVendorLogListColumns;">
              </tr>
            </table>

            <table class="table table-borderd table-stripped custom-table text-center" style="margin-top:5px;">
              <tr *ngIf="VENDOR_LOG_LIST_ELEMENT.length == 0">
                <td colspan="9">No Record Found</td>
              </tr>
            </table>
            <mat-paginator #paginatorone [pageSize]="100" [pageSizeOptions]="[100,300,500,1000]" showFirstLastButtons>
            </mat-paginator>
          </div>
          <div class="col-2"></div>
        </div>
      </mat-card>
    </div>
  </div>
  <div class="row" *ngIf="VENDOR_LOG_LIST_ELEMENT.length == 0">
    <div class="col-12">
      <mat-card>
        <div class="text-center">
          <app-no-data
            [imgsrc]="'https://s3.ap-south-1.amazonaws.com/files.invictusdigisoft.com/images/isometric/no_vendor_list.png'"
            [noDataText]="" [subText]="'No Vendor Log Found'"></app-no-data>
        </div>
      </mat-card>
    </div>
  </div>
</div>

<app-delete-modal #deleteModalRef [deleteMessage]="'Are you Sure? You want to Delete Vendor'"
  [inputText]="'Are you Sure? You want to Delete Vendor'" (deleteOk)="deleteVendor(currentVendorId)"
  (deleteCancel)="deleteComCancel()">
</app-delete-modal>
<app-receipt-modal #receiptModal></app-receipt-modal>